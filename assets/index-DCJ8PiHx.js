(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var Ln,U,fl,ve,$o,dl,pl,_l,is,Ni,xi,ml,Pn={},gl=[],$u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Fn=Array.isArray;function $t(n,t){for(var e in t)n[e]=t[e];return n}function ss(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function At(n,t,e){var r,s,o,a={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?Ln.call(arguments,2):e),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return Tn(n,a,r,s,null)}function Tn(n,t,e,r,s){var o={type:n,props:t,key:e,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++fl,__i:-1,__u:0};return s==null&&U.vnode!=null&&U.vnode(o),o}function Bu(){return{current:null}}function Qt(n){return n.children}function Bt(n,t){this.props=n,this.context=t}function Be(n,t){if(t==null)return n.__?Be(n.__,n.__i+1):null;for(var e;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null)return e.__e;return typeof n.type=="function"?Be(n):null}function yl(n){var t,e;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,t=0;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null){n.__e=n.__c.base=e.__e;break}return yl(n)}}function Oi(n){(!n.__d&&(n.__d=!0)&&ve.push(n)&&!Ir.__r++||$o!=U.debounceRendering)&&(($o=U.debounceRendering)||dl)(Ir)}function Ir(){for(var n,t,e,r,s,o,a,u=1;ve.length;)ve.length>u&&ve.sort(pl),n=ve.shift(),u=ve.length,n.__d&&(e=void 0,r=void 0,s=(r=(t=n).__v).__e,o=[],a=[],t.__P&&((e=$t({},r)).__v=r.__v+1,U.vnode&&U.vnode(e),os(t.__P,e,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,o,s??Be(r),!!(32&r.__u),a),e.__v=r.__v,e.__.__k[e.__i]=e,Tl(o,e,a),r.__e=r.__=null,e.__e!=s&&yl(e)));Ir.__r=0}function vl(n,t,e,r,s,o,a,u,f,h,E){var p,I,S,k,O,D,M,N=r&&r.__k||gl,F=t.length;for(f=ju(e,t,N,f,F),p=0;p<F;p++)(S=e.__k[p])!=null&&(I=S.__i==-1?Pn:N[S.__i]||Pn,S.__i=p,D=os(n,S,I,s,o,a,u,f,h,E),k=S.__e,S.ref&&I.ref!=S.ref&&(I.ref&&as(I.ref,null,S),E.push(S.ref,S.__c||k,S)),O==null&&k!=null&&(O=k),(M=!!(4&S.__u))||I.__k===S.__k?f=El(S,f,n,M):typeof S.type=="function"&&D!==void 0?f=D:k&&(f=k.nextSibling),S.__u&=-7);return e.__e=O,f}function ju(n,t,e,r,s){var o,a,u,f,h,E=e.length,p=E,I=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=Tn(null,a,null,null,null):Fn(a)?a=n.__k[o]=Tn(Qt,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=n.__k[o]=Tn(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,f=o+I,a.__=n,a.__b=n.__b+1,u=null,(h=a.__i=Hu(a,e,f,p))!=-1&&(p--,(u=e[h])&&(u.__u|=2)),u==null||u.__v==null?(h==-1&&(s>E?I--:s<E&&I++),typeof a.type!="function"&&(a.__u|=4)):h!=f&&(h==f-1?I--:h==f+1?I++:(h>f?I--:I++,a.__u|=4))):n.__k[o]=null;if(p)for(o=0;o<E;o++)(u=e[o])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=Be(u)),Il(u,u));return r}function El(n,t,e,r){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,t=El(s[o],t,e,r));return t}n.__e!=t&&(r&&(t&&n.type&&!t.parentNode&&(t=Be(n)),e.insertBefore(n.__e,t||null)),t=n.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function jt(n,t){return t=t||[],n==null||typeof n=="boolean"||(Fn(n)?n.some(function(e){jt(e,t)}):t.push(n)),t}function Hu(n,t,e,r){var s,o,a,u=n.key,f=n.type,h=t[e],E=h!=null&&(2&h.__u)==0;if(h===null&&u==null||E&&u==h.key&&f==h.type)return e;if(r>(E?1:0)){for(s=e-1,o=e+1;s>=0||o<t.length;)if((h=t[a=s>=0?s--:o++])!=null&&(2&h.__u)==0&&u==h.key&&f==h.type)return a}return-1}function Bo(n,t,e){t[0]=="-"?n.setProperty(t,e??""):n[t]=e==null?"":typeof e!="number"||$u.test(t)?e:e+"px"}function lr(n,t,e,r,s){var o,a;t:if(t=="style")if(typeof e=="string")n.style.cssText=e;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(t in r)e&&t in e||Bo(n.style,t,"");if(e)for(t in e)r&&e[t]==r[t]||Bo(n.style,t,e[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(_l,"$1")),a=t.toLowerCase(),t=a in n||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),n.l||(n.l={}),n.l[t+o]=e,e?r?e.u=r.u:(e.u=is,n.addEventListener(t,o?xi:Ni,o)):n.removeEventListener(t,o?xi:Ni,o);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in n)try{n[t]=e??"";break t}catch{}typeof e=="function"||(e==null||e===!1&&t[4]!="-"?n.removeAttribute(t):n.setAttribute(t,t=="popover"&&e==1?"":e))}}function jo(n){return function(t){if(this.l){var e=this.l[t.type+n];if(t.t==null)t.t=is++;else if(t.t<e.u)return;return e(U.event?U.event(t):t)}}}function os(n,t,e,r,s,o,a,u,f,h){var E,p,I,S,k,O,D,M,N,F,z,et,W,w,g,m,T,v=t.type;if(t.constructor!==void 0)return null;128&e.__u&&(f=!!(32&e.__u),o=[u=t.__e=e.__e]),(E=U.__b)&&E(t);t:if(typeof v=="function")try{if(M=t.props,N="prototype"in v&&v.prototype.render,F=(E=v.contextType)&&r[E.__c],z=E?F?F.props.value:E.__:r,e.__c?D=(p=t.__c=e.__c).__=p.__E:(N?t.__c=p=new v(M,z):(t.__c=p=new Bt(M,z),p.constructor=v,p.render=zu),F&&F.sub(p),p.state||(p.state={}),p.__n=r,I=p.__d=!0,p.__h=[],p._sb=[]),N&&p.__s==null&&(p.__s=p.state),N&&v.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=$t({},p.__s)),$t(p.__s,v.getDerivedStateFromProps(M,p.__s))),S=p.props,k=p.state,p.__v=t,I)N&&v.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),N&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(N&&v.getDerivedStateFromProps==null&&M!==S&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(M,z),t.__v==e.__v||!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(M,p.__s,z)===!1){for(t.__v!=e.__v&&(p.props=M,p.state=p.__s,p.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.some(function(A){A&&(A.__=t)}),et=0;et<p._sb.length;et++)p.__h.push(p._sb[et]);p._sb=[],p.__h.length&&a.push(p);break t}p.componentWillUpdate!=null&&p.componentWillUpdate(M,p.__s,z),N&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(S,k,O)})}if(p.context=z,p.props=M,p.__P=n,p.__e=!1,W=U.__r,w=0,N){for(p.state=p.__s,p.__d=!1,W&&W(t),E=p.render(p.props,p.state,p.context),g=0;g<p._sb.length;g++)p.__h.push(p._sb[g]);p._sb=[]}else do p.__d=!1,W&&W(t),E=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++w<25);p.state=p.__s,p.getChildContext!=null&&(r=$t($t({},r),p.getChildContext())),N&&!I&&p.getSnapshotBeforeUpdate!=null&&(O=p.getSnapshotBeforeUpdate(S,k)),m=E,E!=null&&E.type===Qt&&E.key==null&&(m=wl(E.props.children)),u=vl(n,Fn(m)?m:[m],t,e,r,s,o,a,u,f,h),p.base=t.__e,t.__u&=-161,p.__h.length&&a.push(p),D&&(p.__E=p.__=null)}catch(A){if(t.__v=null,f||o!=null)if(A.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;o[o.indexOf(u)]=null,t.__e=u}else{for(T=o.length;T--;)ss(o[T]);Mi(t)}else t.__e=e.__e,t.__k=e.__k,A.then||Mi(t);U.__e(A,t,e)}else o==null&&t.__v==e.__v?(t.__k=e.__k,t.__e=e.__e):u=t.__e=qu(e.__e,t,e,r,s,o,a,f,h);return(E=U.diffed)&&E(t),128&t.__u?void 0:u}function Mi(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Mi)}function Tl(n,t,e){for(var r=0;r<e.length;r++)as(e[r],e[++r],e[++r]);U.__c&&U.__c(t,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){U.__e(o,s.__v)}})}function wl(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Fn(n)?n.map(wl):$t({},n)}function qu(n,t,e,r,s,o,a,u,f){var h,E,p,I,S,k,O,D=e.props||Pn,M=t.props,N=t.type;if(N=="svg"?s="http://www.w3.org/2000/svg":N=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(h=0;h<o.length;h++)if((S=o[h])&&"setAttribute"in S==!!N&&(N?S.localName==N:S.nodeType==3)){n=S,o[h]=null;break}}if(n==null){if(N==null)return document.createTextNode(M);n=document.createElementNS(s,N,M.is&&M),u&&(U.__m&&U.__m(t,o),u=!1),o=null}if(N==null)D===M||u&&n.data==M||(n.data=M);else{if(o=o&&Ln.call(n.childNodes),!u&&o!=null)for(D={},h=0;h<n.attributes.length;h++)D[(S=n.attributes[h]).name]=S.value;for(h in D)if(S=D[h],h!="children"){if(h=="dangerouslySetInnerHTML")p=S;else if(!(h in M)){if(h=="value"&&"defaultValue"in M||h=="checked"&&"defaultChecked"in M)continue;lr(n,h,null,S,s)}}for(h in M)S=M[h],h=="children"?I=S:h=="dangerouslySetInnerHTML"?E=S:h=="value"?k=S:h=="checked"?O=S:u&&typeof S!="function"||D[h]===S||lr(n,h,S,D[h],s);if(E)u||p&&(E.__html==p.__html||E.__html==n.innerHTML)||(n.innerHTML=E.__html),t.__k=[];else if(p&&(n.innerHTML=""),vl(t.type=="template"?n.content:n,Fn(I)?I:[I],t,e,r,N=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:e.__k&&Be(e,0),u,f),o!=null)for(h=o.length;h--;)ss(o[h]);u||(h="value",N=="progress"&&k==null?n.removeAttribute("value"):k!=null&&(k!==n[h]||N=="progress"&&!k||N=="option"&&k!=D[h])&&lr(n,h,k,D[h],s),h="checked",O!=null&&O!=n[h]&&lr(n,h,O,D[h],s))}return n}function as(n,t,e){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&t==null||(n.__u=n(t))}else n.current=t}catch(s){U.__e(s,e)}}function Il(n,t,e){var r,s;if(U.unmount&&U.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||as(r,null,t)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){U.__e(o,t)}r.base=r.__P=null}if(r=n.__k)for(s=0;s<r.length;s++)r[s]&&Il(r[s],t,e||typeof n.type!="function");e||ss(n.__e),n.__c=n.__=n.__e=void 0}function zu(n,t,e){return this.constructor(n,e)}function je(n,t,e){var r,s,o,a;t==document&&(t=document.documentElement),U.__&&U.__(n,t),s=(r=typeof e=="function")?null:e&&e.__k||t.__k,o=[],a=[],os(t,n=(!r&&e||t).__k=At(Qt,null,[n]),s||Pn,Pn,t.namespaceURI,!r&&e?[e]:s?null:t.firstChild?Ln.call(t.childNodes):null,o,!r&&e?e:s?s.__e:t.firstChild,r,a),Tl(o,n,a)}function ls(n,t){je(n,t,ls)}function Li(n,t,e){var r,s,o,a,u=$t({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),t)o=="key"?r=t[o]:o=="ref"?s=t[o]:u[o]=t[o]===void 0&&a!=null?a[o]:t[o];return arguments.length>2&&(u.children=arguments.length>3?Ln.call(arguments,2):e),Tn(n.type,u,r||n.key,s||n.ref,null)}function cs(n){function t(e){var r,s;return this.getChildContext||(r=new Set,(s={})[t.__c]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&r.forEach(function(a){a.__e=!0,Oi(a)})},this.sub=function(o){r.add(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){r&&r.delete(o),a&&a.call(o)}}),e.children}return t.__c="__cC"+ml++,t.__=n,t.Provider=t.__l=(t.Consumer=function(e,r){return e.children(r)}).contextType=t,t}Ln=gl.slice,U={__e:function(n,t,e,r){for(var s,o,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,r||{}),a=s.__d),a)return s.__E=s}catch(u){n=u}throw n}},fl=0,Bt.prototype.setState=function(n,t){var e;e=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=$t({},this.state),typeof n=="function"&&(n=n($t({},e),this.props)),n&&$t(e,n),n!=null&&this.__v&&(t&&this._sb.push(t),Oi(this))},Bt.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Oi(this))},Bt.prototype.render=Qt,ve=[],dl=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pl=function(n,t){return n.__v.__b-t.__v.__b},Ir.__r=0,_l=/(PointerCapture)$|Capture$/i,is=0,Ni=jo(!1),xi=jo(!0),ml=0;var Gu=0;function _(n,t,e,r,s,o){t||(t={});var a,u,f=t;if("ref"in f)for(u in f={},t)u=="ref"?a=t[u]:f[u]=t[u];var h={type:n,props:f,key:e,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Gu,__i:-1,__u:0,__source:s,__self:o};if(typeof n=="function"&&(a=n.defaultProps))for(u in a)f[u]===void 0&&(f[u]=a[u]);return U.vnode&&U.vnode(h),h}const Wu="modulepreload",Ku=function(n){return"/wedding-site/"+n},Ho={},Qu=function(t,e,r){let s=Promise.resolve();if(e&&e.length>0){let f=function(h){return Promise.all(h.map(E=>Promise.resolve(E).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");s=f(e.map(h=>{if(h=Ku(h),h in Ho)return;Ho[h]=!0;const E=h.endsWith(".css"),p=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const I=document.createElement("link");if(I.rel=E?"stylesheet":Wu,E||(I.as="script"),I.crossOrigin="",I.href=h,u&&I.setAttribute("nonce",u),document.head.appendChild(I),E)return new Promise((S,k)=>{I.addEventListener("load",S),I.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return s.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};var oe,Y,Ti,qo,He=0,Al=[],nt=U,zo=nt.__b,Go=nt.__r,Wo=nt.diffed,Ko=nt.__c,Qo=nt.unmount,Xo=nt.__;function Qe(n,t){nt.__h&&nt.__h(Y,n,He||t),He=0;var e=Y.__H||(Y.__H={__:[],__h:[]});return n>=e.__.length&&e.__.push({}),e.__[n]}function xt(n){return He=1,Un(Pl,n)}function Un(n,t,e){var r=Qe(oe++,2);if(r.t=n,!r.__c&&(r.__=[e?e(t):Pl(void 0,t),function(u){var f=r.__N?r.__N[0]:r.__[0],h=r.t(f,u);f!==h&&(r.__N=[h,r.__[1]],r.__c.setState({}))}],r.__c=Y,!Y.__f)){var s=function(u,f,h){if(!r.__c.__H)return!0;var E=r.__c.__H.__.filter(function(I){return!!I.__c});if(E.every(function(I){return!I.__N}))return!o||o.call(this,u,f,h);var p=r.__c.props!==u;return E.forEach(function(I){if(I.__N){var S=I.__[0];I.__=I.__N,I.__N=void 0,S!==I.__[0]&&(p=!0)}}),o&&o.call(this,u,f,h)||p};Y.__f=!0;var o=Y.shouldComponentUpdate,a=Y.componentWillUpdate;Y.componentWillUpdate=function(u,f,h){if(this.__e){var E=o;o=void 0,s(u,f,h),o=E}a&&a.call(this,u,f,h)},Y.shouldComponentUpdate=s}return r.__N||r.__}function Ie(n,t){var e=Qe(oe++,3);!nt.__s&&us(e.__H,t)&&(e.__=n,e.u=t,Y.__H.__h.push(e))}function Ce(n,t){var e=Qe(oe++,4);!nt.__s&&us(e.__H,t)&&(e.__=n,e.u=t,Y.__h.push(e))}function Pt(n){return He=5,Xe(function(){return{current:n}},[])}function bl(n,t,e){He=6,Ce(function(){if(typeof n=="function"){var r=n(t());return function(){n(null),r&&typeof r=="function"&&r()}}if(n)return n.current=t(),function(){return n.current=null}},e==null?e:e.concat(n))}function Xe(n,t){var e=Qe(oe++,7);return us(e.__H,t)&&(e.__=n(),e.__H=t,e.__h=n),e.__}function Rl(n,t){return He=8,Xe(function(){return n},t)}function $r(n){var t=Y.context[n.__c],e=Qe(oe++,9);return e.c=n,t?(e.__==null&&(e.__=!0,t.sub(Y)),t.props.value):n.__}function Sl(n,t){nt.useDebugValue&&nt.useDebugValue(t?t(n):n)}function Cl(){var n=Qe(oe++,11);if(!n.__){for(var t=Y.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var e=t.__m||(t.__m=[0,0]);n.__="P"+e[0]+"-"+e[1]++}return n.__}function Xu(){for(var n;n=Al.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(gr),n.__H.__h.forEach(Fi),n.__H.__h=[]}catch(t){n.__H.__h=[],nt.__e(t,n.__v)}}nt.__b=function(n){Y=null,zo&&zo(n)},nt.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),Xo&&Xo(n,t)},nt.__r=function(n){Go&&Go(n),oe=0;var t=(Y=n.__c).__H;t&&(Ti===Y?(t.__h=[],Y.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(gr),t.__h.forEach(Fi),t.__h=[],oe=0)),Ti=Y},nt.diffed=function(n){Wo&&Wo(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(Al.push(t)!==1&&qo===nt.requestAnimationFrame||((qo=nt.requestAnimationFrame)||Ju)(Xu)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),Ti=Y=null},nt.__c=function(n,t){t.some(function(e){try{e.__h.forEach(gr),e.__h=e.__h.filter(function(r){return!r.__||Fi(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],nt.__e(r,e.__v)}}),Ko&&Ko(n,t)},nt.unmount=function(n){Qo&&Qo(n);var t,e=n.__c;e&&e.__H&&(e.__H.__.forEach(function(r){try{gr(r)}catch(s){t=s}}),e.__H=void 0,t&&nt.__e(t,e.__v))};var Jo=typeof requestAnimationFrame=="function";function Ju(n){var t,e=function(){clearTimeout(r),Jo&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(e,35);Jo&&(t=requestAnimationFrame(e))}function gr(n){var t=Y,e=n.__c;typeof e=="function"&&(n.__c=void 0,e()),Y=t}function Fi(n){var t=Y;n.__c=n.__(),Y=t}function us(n,t){return!n||n.length!==t.length||t.some(function(e,r){return e!==n[r]})}function Pl(n,t){return typeof t=="function"?t(n):t}let Oe,yn;function Yu(n){return!yn||(typeof yn=="string"?n.startsWith(yn):yn.test(n))}function Zu(n,t){let e="";if(Oe=void 0,t&&t.type==="click"){if(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0)return n;const r=t.composedPath().find(o=>o.nodeName=="A"&&o.href),s=r&&r.getAttribute("href");if(!r||r.origin!=location.origin||/^#/.test(s)||!/^(_?self)?$/i.test(r.target)||!Yu(s))return n;Oe=!0,t.preventDefault(),e=r.href.replace(location.origin,"")}else t&&t.url?(Oe=!t.replace,e=t.url):e=location.pathname+location.search;return Oe===!0?history.pushState(null,"",e):Oe===!1&&history.replaceState(null,"",e),e}const th=(n,t,e={})=>{n=n.split("/").filter(Boolean),t=(t||"").split("/").filter(Boolean),e.params||(e.params={});for(let r=0,s,o;r<Math.max(n.length,t.length);r++){let[,a,u,f]=(t[r]||"").match(/^(:?)(.*?)([+*?]?)$/);if(s=n[r],!(!a&&u==s)){if(!a&&s&&f=="*"){e.rest="/"+n.slice(r).map(decodeURIComponent).join("/");break}if(!a||!s&&f!="?"&&f!="*")return;if(o=f=="+"||f=="*",o?s=n.slice(r).map(decodeURIComponent).join("/")||void 0:s&&(s=decodeURIComponent(s)),e.params[u]=s,u in e||(e[u]=s),o)break}}return e};function $n(n){const[t,e]=Un(Zu,n.url||location.pathname+location.search);n.scope&&(yn=n.scope);const r=Oe===!0,s=Xe(()=>{const o=new URL(t,location.origin),a=o.pathname.replace(/\/+$/g,"")||"/";return{url:t,path:a,query:Object.fromEntries(o.searchParams),route:(u,f)=>e({url:u,replace:f}),wasPush:r}},[t]);return Ce(()=>(addEventListener("click",e),addEventListener("popstate",e),()=>{removeEventListener("click",e),removeEventListener("popstate",e)}),[]),At($n.ctx.Provider,{value:s},n.children)}const eh=Promise.resolve();function Vl(n){const[t,e]=Un(m=>m+1,0),{url:r,query:s,wasPush:o,path:a}=kl();if(!r)throw new Error("preact-iso's <Router> must be used within a <LocationProvider>, see: https://github.com/preactjs/preact-iso#locationprovider");const{rest:u=a,params:f={}}=$r(Yo),h=Pt(!1),E=Pt(a),p=Pt(0),I=Pt(),S=Pt(),k=Pt(),O=Pt(!1),D=Pt();D.current=!1;let M,N,F;jt(n.children).some(m=>{if(th(u,m.props.path,F={...m.props,path:u,query:s,params:Object.assign({},f),rest:""}))return M=Li(m,F);m.props.default&&(N=Li(m,F))});let z=M||N;const et=I.current&&I.current.__u&cr&&I.current.__u&ur,W=I.current&&I.current.__h,w=Xe(()=>{S.current=I.current,I.current=At(Yo.Provider,{value:F},z);const m=S.current&&S.current.props.children;return!m||!z||z.type!==m.type||z.props.component!==m.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),p.current++,!0):!1},[r,JSON.stringify(F)]);et?(I.current.__u|=cr,I.current.__u|=ur):W&&(I.current.__h=!0);const g=S.current;return S.current=null,this.__c=(m,T)=>{D.current=!0,S.current=g,n.onLoadStart&&n.onLoadStart(r),h.current=!0;let v=p.current;m.then(()=>{v===p.current&&(S.current=null,I.current&&(T.__h&&(I.current.__h=T.__h),T.__u&ur&&(I.current.__u|=ur),T.__u&cr&&(I.current.__u|=cr)),eh.then(e))})},Ce(()=>{const m=this.__v&&this.__v.__e;if(D.current){!O.current&&!k.current&&(k.current=m);return}!O.current&&k.current&&(k.current!==m&&k.current.remove(),k.current=null),O.current=!0,E.current!==a&&(o&&scrollTo(0,0),n.onRouteChange&&n.onRouteChange(r),E.current=a),n.onLoadEnd&&h.current&&n.onLoadEnd(r),h.current=!1},[a,o,t]),w?[At(wi,{r:I}),At(wi,{r:S})]:At(wi,{r:I})}const cr=32,ur=128,wi=({r:n})=>n.current;Vl.Provider=$n;$n.ctx=cs({});const Yo=cs({}),xe=n=>At(n.component,n),kl=()=>$r($n.ctx),Zo=U.__b;U.__b=n=>{n.type&&n.type._forwarded&&n.ref&&(n.props.ref=n.ref,n.ref=null),Zo&&Zo(n)};const ta=U.__e;U.__e=(n,t,e)=>{if(n&&n.then){let r=t;for(;r=r.__;)if(r.__c&&r.__c.__c)return t.__e==null&&(t.__c.__z=[e.__e],t.__e=e.__e,t.__k=e.__k),t.__k||(t.__k=[]),r.__c.__c(n,t)}ta&&ta(n,t,e)};let ea;function nh(n,t){if(typeof window>"u")return;let e=document.querySelector("script[type=isodata]");t=t||e&&e.parentNode||document.body,!ea&&e?ls(n,t):je(n,t),ea=!0}const rh="_heroImage_uahha_1",na={heroImage:rh},ih="_nav_links_ek7k4_1",sh="_active_ek7k4_55",oh="_toggleNav_ek7k4_79",ah="_nav_menu_ek7k4_89",lh="_open_ek7k4_89",ch="_nav_icon3_ek7k4_1",Ft={nav_links:ih,active:sh,toggleNav:oh,nav_menu:ah,open:lh,nav_icon3:ch};function uh(){return _("div",{id:Ft.nav_icon3,children:[_("span",{}),_("span",{}),_("span",{}),_("span",{})]})}function hh(){const{url:n}=kl(),[t,e]=xt(!1),[r,s]=xt(!1);return _("nav",{class:`${Ft.nav_menu} ${r?Ft.open:""}`,children:[_("button",{class:`${Ft.toggleNav}`,onClick:()=>s(o=>!o),"aria-expanded":r,"aria-controls":"nav_menu",children:["Menu"," ",_(uh,{})]}),_("div",{class:Ft.nav_links,children:[_("a",{href:"/",class:n=="/"&&Ft.active,children:"Hem"}),_("a",{href:"/innan-brollopsdagen",class:n=="/innan-brollopsdagen"&&Ft.active,children:"Innan bröllopsdagen"}),_("a",{href:"/brollopsdagen",class:n=="/brollopsdagen"&&Ft.active,children:"Bröllopsdagen"}),_("a",{href:"/osa",class:n=="/osa"&&Ft.active,children:"O.S.A"}),_("a",{href:"/kontakt",class:n=="/kontakt"&&Ft.active,children:"Kontakt"})]})]})}const fh="/wedding-site/assets/hero_1-h0qY9L_8.jpg";function dh(){return _("header",{class:na.header,children:[_("img",{class:na.heroImage,src:fh,alt:"Couple's image"}),_(hh,{})]})}const ph={};function _h({targetDate:n,countdownText:t,completionText:e}){const[r,s]=xt(null),o=f=>String(f).length===1?`0${f}`:`${f}`,a=f=>`${o(f)}`;function u(f){if(!f)throw new Error("No target date provided");let h=null;typeof f=="string"?h=new Date(f).getTime():f instanceof Date?h=f.getTime():h=f;var E=h-Date.now(),p=Math.round(parseFloat((Math.max(0,E)/1e3).toFixed(2))*1e3),I=Math.abs(p)/1e3;return{total:p,days:Math.floor(I/(3600*24)),hours:Math.floor(I/3600%24),minutes:Math.floor(I/60%60),seconds:Math.floor(I%60),completed:p<=0}}return Ie(()=>{const f=u(n);s(f)},[]),Ie(()=>{const f=u(n);s(f)},[r]),r===0||r===null?_("p",{children:e}):_("div",{class:"counter__wrapper",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[_("h3",{children:t}),_("div",{style:{display:"flex",justifyContent:"space-around",width:"100%"},children:[_("p",{children:[_("span",{class:"counter days",children:a(r.days)})," dagar "]}),_("p",{children:[_("span",{class:"counter hours",children:a(r.hours)})," timmar "]}),_("p",{children:[_("span",{class:"counter minutes",children:a(r.minutes)})," minuter "]}),_("p",{children:[_("span",{class:"counter seconds",children:a(r.seconds)})," sekunder "]})]})]})}const mh="_timeline__container_n64cw_9",gh="_timeline_n64cw_9",yh="_event_wrapper_n64cw_67",vh="_event_n64cw_67",Vt={timeline__container:mh,timeline:gh,event_wrapper:yh,event:vh};function Eh(n){return _("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"1em",height:"1em",...n,children:_("path",{fill:"currentColor",d:"M6 6C4.355 6 3 7.355 3 9v6.781c-.61.551-1 1.34-1 2.219v9h5v-2h18v2h5v-9c0-.879-.39-1.668-1-2.219V9c0-1.645-1.355-3-3-3zm0 2h20c.555 0 1 .445 1 1v6h-2v-1c0-1.645-1.355-3-3-3h-4c-.766 0-1.469.3-2 .781A2.98 2.98 0 0 0 14 11h-4c-1.645 0-3 1.355-3 3v1H5V9c0-.555.445-1 1-1m4 5h4c.555 0 1 .445 1 1v1H9v-1c0-.555.445-1 1-1m8 0h4c.555 0 1 .445 1 1v1h-6v-1c0-.555.445-1 1-1M5 17h22c.555 0 1 .445 1 1v7h-1v-2H5v2H4v-7c0-.555.445-1 1-1"})})}function Th(n){return _("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"1em",height:"1em",...n,children:_("path",{fill:"currentColor",d:"M17.935 15.291a3.74 3.74 0 0 0 3.863 2.562l2.457 7.528l-2.54.83a.82.82 0 0 0-.53 1.05c.14.44.61.68 1.05.53l6.69-2.18a.82.82 0 0 0 .53-1.05a.82.82 0 0 0-1.04-.54l-2.54.83l-2.456-7.524a3.74 3.74 0 0 0 1.616-4.356l-3.43-10.52a.66.66 0 0 0-.83-.42l-5.85 1.91c-.34.11-.53.48-.42.83l.123.378l-2.903-.948a.66.66 0 0 0-.83.42l-3.43 10.52a3.74 3.74 0 0 0 1.615 4.356l-2.455 7.524l-2.54-.83c-.43-.14-.89.1-1.04.54s.09.91.53 1.05l6.69 2.18a.82.82 0 0 0 1.05-.53a.82.82 0 0 0-.53-1.05l-2.54-.83l2.457-7.527a3.74 3.74 0 0 0 3.863-2.563l2.039-6.253zm.19-7.69c1.08.91 2.47 1.36 3.88 1.27c.53-.03 1.01.29 1.17.8l1.04 3.18c.51 1.56-.35 3.25-1.92 3.77c-1.57.51-3.26-.35-3.78-1.92l-2.3-7.07c-.21-.65.56-1.17 1.08-.73zm-.32-1.81a.83.83 0 1 1 0-1.66a.83.83 0 0 1 0 1.66m1.83 1.88a.56.56 0 1 1 0-1.12a.56.56 0 0 1 0 1.12m.56-2.71a.33.33 0 1 1-.66 0a.33.33 0 0 1 .66 0m-6.21 11.91a3.01 3.01 0 0 1-3.78 1.92a3.01 3.01 0 0 1-1.92-3.78l1.2-3.67c.07-.22.27-.37.5-.37l5.2-.09c.37 0 .63.36.52.71z"})})}function wh(){const n=Pt(null);Pt(null);const t=Pt([]),e=r=>{r&&!t.current.includes(r)&&t.current.push(r)};return Ie(()=>{const r=n.current.style.height?.replace("px",""),s=t.current;r/s.length/2},[]),_("div",{class:Vt.timeline__container,ref:n,children:[_("div",{class:Vt.timeline}),_("div",{class:Vt.event_wrapper,children:[_("div",{class:Vt.event,ref:e,children:[_("span",{children:"Check-in"}),_("span",{children:"14:30"}),_(Eh,{width:"48px",height:"48px"})]}),_("div",{class:Vt.event,ref:e,children:[_("span",{children:"Vigsel"}),_("span",{children:"15:00"})]}),_("div",{class:Vt.event,ref:e,children:[_("span",{children:"Mingel"}),_("span",{children:"15:30"}),_(Th,{width:"48px",height:"48px"})]}),_("div",{class:Vt.event,ref:e,children:[_("span",{children:"Middag"}),_("span",{children:"17:00"})]}),_("div",{class:Vt.event,ref:e,children:[_("span",{children:"Tårta"}),_("span",{children:"22:00"})]}),_("div",{class:Vt.event,ref:e,children:[_("span",{children:"First dance"}),_("span",{children:"22:30"})]}),_("div",{class:Vt.event,ref:e,children:[_("span",{children:"Party"}),_("span",{children:"23:00"})]}),_("div",{class:Vt.event,ref:e,children:[_("span",{children:"Nattamat"}),_("span",{children:"01:00"})]}),_("div",{class:Vt.event,ref:e,children:[_("span",{children:"Dags att gå hem"}),_("span",{children:"02:00"})]})]})]})}const Ih="_section_o3z6f_1",Ah="_text_block_o3z6f_43",ra={section:Ih,text_block:Ah};function zt({title:n,children:t}){return _("section",{class:ra.section,children:[_("h2",{children:n}),_("div",{class:ra.text_block,children:t})]})}function bh(){return _("div",{class:ph.home,children:[_(zt,{title:"Vi ska gifta oss!",children:[_("p",{children:"Du som fått vår inbjudan med länken till denna hemsida är en av de personer som, på ett eller annat vis, är de bästa i våra liv. Vi vill förstås att du ska komma till vårt bröllop och dela den dagen med oss!"}),_("p",{children:"Vi har samlat all information här på hemsidan, på ett och samma ställe för att underlätta för oss alla. Här finner du information om vigsel, fest, boende och praktiska detaljer och lite annat som ni kan tänkas vilja veta."}),_("p",{children:"O.S.A. senast den 1 juni, speciellt viktigt för dig som vill bo på Rånäs Slott över natten. Tveka inte att kontakta oss om ni undrar över något. Vi ser fram emot att se er på vårt bröllop!"}),_("p",{children:"Kram, Laurita & Patrick"})]}),_(zt,{title:"",children:_(_h,{targetDate:"2026-06-13",countdownText:"Bröllopsdag om...",completionText:"Bröllopsdags!"})}),_(zt,{title:"Bröllopsdagen",children:_(wh,{})}),_(zt,{title:"Vi ska gifta oss!",children:[_("p",{children:"Du som fått vår inbjudan med länken till denna hemsida är en av de personer som, på ett eller annat vis, är de bästa i våra liv. Vi vill förstås att du ska komma till vårt bröllop och dela den dagen med oss!"}),_("p",{children:"Vi har samlat all information här på hemsidan, på ett och samma ställe för att underlätta för oss alla. Här finner du information om vigsel, fest, boende och praktiska detaljer och lite annat som ni kan tänkas vilja veta."}),_("p",{children:"O.S.A. senast den 1 juni, speciellt viktigt för dig som vill bo på Rånäs Slott över natten. Tveka inte att kontakta oss om ni undrar över något. Vi ser fram emot att se er på vårt bröllop!"}),_("p",{children:"Kram, Laurita & Patrick"})]})]})}function Dl(n,t){for(var e in t)n[e]=t[e];return n}function Ui(n,t){for(var e in n)if(e!=="__source"&&!(e in t))return!0;for(var r in t)if(r!=="__source"&&n[r]!==t[r])return!0;return!1}function Nl(n,t){var e=t(),r=xt({t:{__:e,u:t}}),s=r[0].t,o=r[1];return Ce(function(){s.__=e,s.u=t,Ii(s)&&o({t:s})},[n,e,t]),Ie(function(){return Ii(s)&&o({t:s}),n(function(){Ii(s)&&o({t:s})})},[n]),e}function Ii(n){var t,e,r=n.u,s=n.__;try{var o=r();return!((t=s)===(e=o)&&(t!==0||1/t==1/e)||t!=t&&e!=e)}catch{return!0}}function xl(n){n()}function Ol(n){return n}function Ml(){return[!1,xl]}var Ll=Ce;function $i(n,t){this.props=n,this.context=t}function Rh(n,t){function e(s){var o=this.props.ref,a=o==s.ref;return!a&&o&&(o.call?o(null):o.current=null),t?!t(this.props,s)||!a:Ui(this.props,s)}function r(s){return this.shouldComponentUpdate=e,At(n,s)}return r.displayName="Memo("+(n.displayName||n.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r.type=n,r}($i.prototype=new Bt).isPureReactComponent=!0,$i.prototype.shouldComponentUpdate=function(n,t){return Ui(this.props,n)||Ui(this.state,t)};var ia=U.__b;U.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),ia&&ia(n)};var Sh=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ch(n){function t(e){var r=Dl({},e);return delete r.ref,n(r,e.ref||null)}return t.$$typeof=Sh,t.render=n,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(n.displayName||n.name)+")",t}var sa=function(n,t){return n==null?null:jt(jt(n).map(t))},Ph={map:sa,forEach:sa,count:function(n){return n?jt(n).length:0},only:function(n){var t=jt(n);if(t.length!==1)throw"Children.only";return t[0]},toArray:jt},Vh=U.__e;U.__e=function(n,t,e,r){if(n.then){for(var s,o=t;o=o.__;)if((s=o.__c)&&s.__c)return t.__e==null&&(t.__e=e.__e,t.__k=e.__k),s.__c(n,t)}Vh(n,t,e,r)};var oa=U.unmount;function Fl(n,t,e){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=Dl({},n)).__c!=null&&(n.__c.__P===e&&(n.__c.__P=t),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return Fl(r,t,e)})),n}function Ul(n,t,e){return n&&e&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return Ul(r,t,e)}),n.__c&&n.__c.__P===t&&(n.__e&&e.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=e)),n}function wn(){this.__u=0,this.o=null,this.__b=null}function $l(n){var t=n.__.__c;return t&&t.__a&&t.__a(n)}function Bl(n){var t,e,r,s=null;function o(a){if(t||(t=n()).then(function(u){u&&(s=u.default||u),r=!0},function(u){e=u,r=!0}),e)throw e;if(!r)throw t;return s?At(s,a):null}return o.displayName="Lazy",o.__f=!0,o}function vn(){this.i=null,this.l=null}U.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&32&n.__u&&(n.type=null),oa&&oa(n)},(wn.prototype=new Bt).__c=function(n,t){var e=t.__c,r=this;r.o==null&&(r.o=[]),r.o.push(e);var s=$l(r.__v),o=!1,a=function(){o||(o=!0,e.__R=null,s?s(u):u())};e.__R=a;var u=function(){if(!--r.__u){if(r.state.__a){var f=r.state.__a;r.__v.__k[0]=Ul(f,f.__c.__P,f.__c.__O)}var h;for(r.setState({__a:r.__b=null});h=r.o.pop();)h.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(a,a)},wn.prototype.componentWillUnmount=function(){this.o=[]},wn.prototype.render=function(n,t){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Fl(this.__b,e,r.__O=r.__P)}this.__b=null}var s=t.__a&&At(Qt,null,n.fallback);return s&&(s.__u&=-33),[At(Qt,null,t.__a?null:n.children),s]};var aa=function(n,t,e){if(++e[1]===e[0]&&n.l.delete(t),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(e=n.i;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.i=e=e[2]}};function kh(n){return this.getChildContext=function(){return n.context},n.children}function Dh(n){var t=this,e=n.h;if(t.componentWillUnmount=function(){je(null,t.v),t.v=null,t.h=null},t.h&&t.h!==e&&t.componentWillUnmount(),!t.v){for(var r=t.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;t.h=e,t.v={nodeType:1,parentNode:e,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(s,o){this.childNodes.push(s),t.h.insertBefore(s,o)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),t.h.removeChild(s)}}}je(At(kh,{context:t.context},n.__v),t.v)}function Nh(n,t){var e=At(Dh,{__v:n,h:t});return e.containerInfo=t,e}(vn.prototype=new Bt).__a=function(n){var t=this,e=$l(t.__v),r=t.l.get(n);return r[0]++,function(s){var o=function(){t.props.revealOrder?(r.push(s),aa(t,n,r)):s()};e?e(o):o()}},vn.prototype.render=function(n){this.i=null,this.l=new Map;var t=jt(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&t.reverse();for(var e=t.length;e--;)this.l.set(t[e],this.i=[1,0,this.i]);return n.children},vn.prototype.componentDidUpdate=vn.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(t,e){aa(n,e,t)})};var jl=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,xh=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Oh=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Mh=/[A-Z0-9]/g,Lh=typeof document<"u",Fh=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function Uh(n,t,e){return t.__k==null&&(t.textContent=""),je(n,t),typeof e=="function"&&e(),n?n.__c:null}function $h(n,t,e){return ls(n,t),typeof e=="function"&&e(),n?n.__c:null}Bt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Bt.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(t){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:t})}})});var la=U.event;function Bh(){}function jh(){return this.cancelBubble}function Hh(){return this.defaultPrevented}U.event=function(n){return la&&(n=la(n)),n.persist=Bh,n.isPropagationStopped=jh,n.isDefaultPrevented=Hh,n.nativeEvent=n};var hs,qh={enumerable:!1,configurable:!0,get:function(){return this.class}},ca=U.vnode;U.vnode=function(n){typeof n.type=="string"&&(function(t){var e=t.props,r=t.type,s={},o=r.indexOf("-")===-1;for(var a in e){var u=e[a];if(!(a==="value"&&"defaultValue"in e&&u==null||Lh&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var f=a.toLowerCase();a==="defaultValue"&&"value"in e&&e.value==null?a="value":a==="download"&&u===!0?u="":f==="translate"&&u==="no"?u=!1:f[0]==="o"&&f[1]==="n"?f==="ondoubleclick"?a="ondblclick":f!=="onchange"||r!=="input"&&r!=="textarea"||Fh(e.type)?f==="onfocus"?a="onfocusin":f==="onblur"?a="onfocusout":Oh.test(a)&&(a=f):f=a="oninput":o&&xh.test(a)?a=a.replace(Mh,"-$&").toLowerCase():u===null&&(u=void 0),f==="oninput"&&s[a=f]&&(a="oninputCapture"),s[a]=u}}r=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=jt(e.children).forEach(function(h){h.props.selected=s.value.indexOf(h.props.value)!=-1})),r=="select"&&s.defaultValue!=null&&(s.value=jt(e.children).forEach(function(h){h.props.selected=s.multiple?s.defaultValue.indexOf(h.props.value)!=-1:s.defaultValue==h.props.value})),e.class&&!e.className?(s.class=e.class,Object.defineProperty(s,"className",qh)):(e.className&&!e.class||e.class&&e.className)&&(s.class=s.className=e.className),t.props=s})(n),n.$$typeof=jl,ca&&ca(n)};var ua=U.__r;U.__r=function(n){ua&&ua(n),hs=n.__c};var ha=U.diffed;U.diffed=function(n){ha&&ha(n);var t=n.props,e=n.__e;e!=null&&n.type==="textarea"&&"value"in t&&t.value!==e.value&&(e.value=t.value==null?"":t.value),hs=null};var zh={ReactCurrentDispatcher:{current:{readContext:function(n){return hs.__n[n.__c].props.value},useCallback:Rl,useContext:$r,useDebugValue:Sl,useDeferredValue:Ol,useEffect:Ie,useId:Cl,useImperativeHandle:bl,useInsertionEffect:Ll,useLayoutEffect:Ce,useMemo:Xe,useReducer:Un,useRef:Pt,useState:xt,useSyncExternalStore:Nl,useTransition:Ml}}};function Gh(n){return At.bind(null,n)}function Br(n){return!!n&&n.$$typeof===jl}function Wh(n){return Br(n)&&n.type===Qt}function Kh(n){return!!n&&!!n.displayName&&(typeof n.displayName=="string"||n.displayName instanceof String)&&n.displayName.startsWith("Memo(")}function Qh(n){return Br(n)?Li.apply(null,arguments):n}function Xh(n){return!!n.__k&&(je(null,n),!0)}function Jh(n){return n&&(n.base||n.nodeType===1&&n)||null}var Yh=function(n,t){return n(t)},Zh=function(n,t){return n(t)},tf=Qt,ef=Br,lg={useState:xt,useId:Cl,useReducer:Un,useEffect:Ie,useLayoutEffect:Ce,useInsertionEffect:Ll,useTransition:Ml,useDeferredValue:Ol,useSyncExternalStore:Nl,startTransition:xl,useRef:Pt,useImperativeHandle:bl,useMemo:Xe,useCallback:Rl,useContext:$r,useDebugValue:Sl,version:"18.3.1",Children:Ph,render:Uh,hydrate:$h,unmountComponentAtNode:Xh,createPortal:Nh,createElement:At,createContext:cs,createFactory:Gh,cloneElement:Qh,createRef:Bu,Fragment:Qt,isValidElement:Br,isElement:ef,isFragment:Wh,isMemo:Kh,findDOMNode:Jh,Component:Bt,PureComponent:$i,memo:Rh,forwardRef:Ch,flushSync:Zh,unstable_batchedUpdates:Yh,StrictMode:tf,Suspense:wn,SuspenseList:vn,lazy:Bl,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:zh};const nf=Bl(()=>Qu(()=>import("./Map-DGr1FsmR.js"),[]));function rf(){return _("div",{children:_(zt,{title:"Innan bröllopsdagen",children:[_("p",{children:"Vi (bröllopsparet) kommer checka in och chillaxa på hotellet fredagen innan bröllopet. Ni är mer än välkomna att hänga på och ni kan boka rum för fredagen den 12/6 på egen risk och med egen plånbok."}),_("p",{children:["Ni kan boka på ",_("a",{href:"https://mossbylund.se/",children:" denna länk"}),"."]}),_(wn,{fallback:_("div",{style:{height:400}}),children:_(nf,{})})]})})}const sf="_schedule_5krx8_1",of="_event_5krx8_39",af="_event_info_5krx8_63",lf="_event_title_5krx8_73",yt={schedule:sf,event:of,event_info:af,event_title:lf};function ge({children:n}){return _("div",{class:yt.event,children:n})}function cf(){return _("div",{class:yt.schedule,children:[_(ge,{children:[_("h3",{class:yt.event_title,children:"Check-in"}),_("div",{className:yt.event_info,children:_("p",{children:"För er som stannar över natten är incheckning möjlig från kl. 15.00. Kom gärna i god tid eller planera dagen så att det passar och ni är på plats i god tid till vigseln."})}),_("p",{children:"15:00"})]}),_(ge,{children:[_("h3",{class:yt.event_title,children:"Vigsel"}),_("div",{className:yt.event_info,children:[_("p",{children:"Vigseln äger rum på plats på Mossbylund och börjar kl. 16.00. Det blir en borgerlig ceremoni som, om vädret tillåter, hålls utomhus i vacker miljö."}),_("p",{children:"För er som kommer direkt till vigseln är ni varmt välkomna att anlända en liten stund innan, så att vi tillsammans kan ta in stunden och börja dagen i ro."})]}),_("p",{children:"16:00"})]}),_(ge,{children:[_("h3",{class:yt.event_title,children:"Mingel"}),_("div",{className:yt.event_info,children:_("p",{children:"Efter vigseln, ca kl. 16:30, blir det brudskål när vi kommer till minglet, följt av mingel med tilltugg, dryck och en liten söt överraskning."})}),_("p",{children:"16:30"})]}),_(ge,{children:[_("h3",{class:yt.event_title,children:"Middag"}),_("div",{className:yt.event_info,children:_("p",{children:"Vid kl. 18 sätter vi oss till bords för middag. Vi bjuds på en trerättersmiddag med passande dryck, och under kvällen guidar våra toastmadames oss genom allt som händer – en lek eller två och kanske några tal här och där. Framför allt blir det en kväll fylld av skratt, god mat och härligt sällskap!"})}),_("p",{children:"18:00"})]}),_(ge,{children:[_("h3",{class:yt.event_title,children:"Tårta"}),_("div",{className:yt.event_info,children:_("p",{children:"Som de fullfjädrade gottegrisar vi är kan vi aldrig låta bli sötsaker – därför avslutar vi middagen med bröllopsstårta, ungefär vid kl. 22"})}),_("p",{children:"22:00"})]}),_(ge,{children:[_("h3",{class:yt.event_title,children:"Första dansen"}),_("div",{className:yt.event_info,children:_("p",{children:"Efter bröllopsstårtan är det dags att plocka fram dansskorna! Kvällen fortsätter på dansgolvet, och vi inleder med vår första dans som brudpar. Sedan blir det dans, skratt och fest långt in på natten."})}),_("p",{children:"23:00"})]}),_(ge,{children:[_("h3",{class:yt.event_title,children:"Dans"}),_("div",{className:yt.event_info,children:_("p",{children:"Håll i dansskorna...."})}),_("p",{children:"23:15"})]})]})}function uf(){return _("div",{children:[_(zt,{title:"Bröllopsdagen",children:_(cf,{})}),_(zt,{title:"Vi ska gifta oss!",children:[_("p",{children:"Du som fått vår inbjudan med länken till denna hemsida är en av de personer som, på ett eller annat vis, är de bästa i våra liv. Vi vill förstås att du ska komma till vårt bröllop och dela den dagen med oss!"}),_("p",{children:"Vi har samlat all information här på hemsidan, på ett och samma ställe för att underlätta för oss alla. Här finner du information om vigsel, fest, boende och praktiska detaljer och lite annat som ni kan tänkas vilja veta."}),_("p",{children:"O.S.A. senast den 1 juni, speciellt viktigt för dig som vill bo på Rånäs Slott över natten. Tveka inte att kontakta oss om ni undrar över något. Vi ser fram emot att se er på vårt bröllop!"}),_("p",{children:"Kram, Laurita & Patrick"})]})]})}const hf="_rsvp_form_1j8li_69",ff="_validIcon_1j8li_83",df="_errorIcon_1j8li_97",pf="_rsvp_button_1j8li_111",_f="_textarea__wrapper_1j8li_155",mf="_section_wrapper_1j8li_171",gf="_active_1j8li_187",yf="_name_container_1j8li_197",vf="_radio_1j8li_215",Ef="_food_pref_1j8li_289",J={rsvp_form:hf,validIcon:ff,errorIcon:df,rsvp_button:pf,textarea__wrapper:_f,section_wrapper:mf,active:gf,name_container:yf,radio:vf,food_pref:Ef},Tf=()=>{};var fa={};const Hl=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},wf=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const s=n[e++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[e++];t[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[e++],a=n[e++],u=n[e++],f=((s&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(f>>10)),t[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[e++],a=n[e++];t[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return t.join("")},ql={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,u=a?n[s+1]:0,f=s+2<n.length,h=f?n[s+2]:0,E=o>>2,p=(o&3)<<4|u>>4;let I=(u&15)<<2|h>>6,S=h&63;f||(S=64,a||(I=64)),r.push(e[E],e[p],e[I],e[S])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Hl(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):wf(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=e[n.charAt(s++)],u=s<n.length?e[n.charAt(s)]:0;++s;const h=s<n.length?e[n.charAt(s)]:64;++s;const p=s<n.length?e[n.charAt(s)]:64;if(++s,o==null||u==null||h==null||p==null)throw new If;const I=o<<2|u>>4;if(r.push(I),h!==64){const S=u<<4&240|h>>2;if(r.push(S),p!==64){const k=h<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class If extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Af=function(n){const t=Hl(n);return ql.encodeByteArray(t,!0)},Ar=function(n){return Af(n).replace(/\./g,"")},bf=function(n){try{return ql.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Rf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Sf=()=>Rf().__FIREBASE_DEFAULTS__,Cf=()=>{if(typeof process>"u"||typeof fa>"u")return;const n=fa.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Pf=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&bf(n[1]);return t&&JSON.parse(t)},fs=()=>{try{return Tf()||Sf()||Cf()||Pf()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Vf=n=>fs()?.emulatorHosts?.[n],kf=n=>{const t=Vf(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},zl=()=>fs()?.config;class Df{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}function ds(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nf(n){return(await fetch(n,{credentials:"include"})).ok}function xf(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ar(JSON.stringify(e)),Ar(JSON.stringify(a)),""].join(".")}const In={};function Of(){const n={prod:[],emulator:[]};for(const t of Object.keys(In))In[t]?n.emulator.push(t):n.prod.push(t);return n}function Mf(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let da=!1;function Lf(n,t){if(typeof window>"u"||typeof document>"u"||!ds(window.location.host)||In[n]===t||In[n]||da)return;In[n]=t;function e(I){return`__firebase__banner__${I}`}const r="__firebase__banner",o=Of().prod.length>0;function a(){const I=document.getElementById(r);I&&I.remove()}function u(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function f(I,S){I.setAttribute("width","24"),I.setAttribute("id",S),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function h(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{da=!0,a()},I}function E(I,S){I.setAttribute("id",S),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function p(){const I=Mf(r),S=e("text"),k=document.getElementById(S)||document.createElement("span"),O=e("learnmore"),D=document.getElementById(O)||document.createElement("a"),M=e("preprendIcon"),N=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const F=I.element;u(F),E(D,O);const z=h();f(N,M),F.append(N,k,D,z),document.body.appendChild(F)}o?(k.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ff(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uf(){const n=fs()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $f(){return!Uf()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bf(){try{return typeof indexedDB=="object"}catch{return!1}}function jf(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}const Hf="FirebaseError";class Je extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=Hf,Object.setPrototypeOf(this,Je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},s=`${this.service}/${t}`,o=this.errors[t],a=o?qf(o,r):"Error",u=`${this.serviceName}: ${a} (${s}).`;return new Je(s,u,r)}}function qf(n,t){return n.replace(zf,(e,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const zf=/\{\$([^}]+)}/g;function br(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const s of e){if(!r.includes(s))return!1;const o=n[s],a=t[s];if(pa(o)&&pa(a)){if(!br(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!e.includes(s))return!1;return!0}function pa(n){return n!==null&&typeof n=="object"}function Vn(n){return n&&n._delegate?n._delegate:n}class kn{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ye="[DEFAULT]";class Gf{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new Df;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Kf(t))try{this.getOrInitializeService({instanceIdentifier:ye})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(t=ye){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ye){return this.instances.has(t)}getOptions(t=ye){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(s)}return s}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const s of r)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wf(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ye){return this.component?this.component.multipleInstances?t:ye:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wf(n){return n===ye?void 0:n}function Kf(n){return n.instantiationMode==="EAGER"}class Qf{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Gf(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var q;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(q||(q={}));const Xf={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Jf=q.INFO,Yf={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Zf=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),s=Yf[t];if(s)console[s](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Wl{constructor(t){this.name=t,this._logLevel=Jf,this._logHandler=Zf,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in q))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Xf[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...t),this._logHandler(this,q.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...t),this._logHandler(this,q.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,q.INFO,...t),this._logHandler(this,q.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,q.WARN,...t),this._logHandler(this,q.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...t),this._logHandler(this,q.ERROR,...t)}}const td=(n,t)=>t.some(e=>n instanceof e);let _a,ma;function ed(){return _a||(_a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nd(){return ma||(ma=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kl=new WeakMap,Bi=new WeakMap,Ql=new WeakMap,Ai=new WeakMap,ps=new WeakMap;function rd(n){const t=new Promise((e,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{e(re(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&Kl.set(e,n)}).catch(()=>{}),ps.set(t,n),t}function id(n){if(Bi.has(n))return;const t=new Promise((e,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{e(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Bi.set(n,t)}let ji={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Bi.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Ql.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return re(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function sd(n){ji=n(ji)}function od(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(bi(this),t,...e);return Ql.set(r,t.sort?t.sort():[t]),re(r)}:nd().includes(n)?function(...t){return n.apply(bi(this),t),re(Kl.get(this))}:function(...t){return re(n.apply(bi(this),t))}}function ad(n){return typeof n=="function"?od(n):(n instanceof IDBTransaction&&id(n),td(n,ed())?new Proxy(n,ji):n)}function re(n){if(n instanceof IDBRequest)return rd(n);if(Ai.has(n))return Ai.get(n);const t=ad(n);return t!==n&&(Ai.set(n,t),ps.set(t,n)),t}const bi=n=>ps.get(n);function ld(n,t,{blocked:e,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(n,t),u=re(a);return r&&a.addEventListener("upgradeneeded",f=>{r(re(a.result),f.oldVersion,f.newVersion,re(a.transaction),f)}),e&&a.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const cd=["get","getKey","getAll","getAllKeys","count"],ud=["put","add","delete","clear"],Ri=new Map;function ga(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Ri.get(t))return Ri.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,s=ud.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cd.includes(e)))return;const o=async function(a,...u){const f=this.transaction(a,s?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[e](...u),s&&f.done]))[0]};return Ri.set(t,o),o}sd(n=>({...n,get:(t,e,r)=>ga(t,e)||n.get(t,e,r),has:(t,e)=>!!ga(t,e)||n.has(t,e)}));class hd{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(fd(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function fd(n){return n.getComponent()?.type==="VERSION"}const Hi="@firebase/app",ya="0.14.6";const Xt=new Wl("@firebase/app"),dd="@firebase/app-compat",pd="@firebase/analytics-compat",_d="@firebase/analytics",md="@firebase/app-check-compat",gd="@firebase/app-check",yd="@firebase/auth",vd="@firebase/auth-compat",Ed="@firebase/database",Td="@firebase/data-connect",wd="@firebase/database-compat",Id="@firebase/functions",Ad="@firebase/functions-compat",bd="@firebase/installations",Rd="@firebase/installations-compat",Sd="@firebase/messaging",Cd="@firebase/messaging-compat",Pd="@firebase/performance",Vd="@firebase/performance-compat",kd="@firebase/remote-config",Dd="@firebase/remote-config-compat",Nd="@firebase/storage",xd="@firebase/storage-compat",Od="@firebase/firestore",Md="@firebase/ai",Ld="@firebase/firestore-compat",Fd="firebase",Ud="12.6.0";const qi="[DEFAULT]",$d={[Hi]:"fire-core",[dd]:"fire-core-compat",[_d]:"fire-analytics",[pd]:"fire-analytics-compat",[gd]:"fire-app-check",[md]:"fire-app-check-compat",[yd]:"fire-auth",[vd]:"fire-auth-compat",[Ed]:"fire-rtdb",[Td]:"fire-data-connect",[wd]:"fire-rtdb-compat",[Id]:"fire-fn",[Ad]:"fire-fn-compat",[bd]:"fire-iid",[Rd]:"fire-iid-compat",[Sd]:"fire-fcm",[Cd]:"fire-fcm-compat",[Pd]:"fire-perf",[Vd]:"fire-perf-compat",[kd]:"fire-rc",[Dd]:"fire-rc-compat",[Nd]:"fire-gcs",[xd]:"fire-gcs-compat",[Od]:"fire-fst",[Ld]:"fire-fst-compat",[Md]:"fire-vertex","fire-js":"fire-js",[Fd]:"fire-js-all"};const Rr=new Map,Bd=new Map,zi=new Map;function va(n,t){try{n.container.addComponent(t)}catch(e){Xt.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Sr(n){const t=n.name;if(zi.has(t))return Xt.debug(`There were multiple attempts to register component ${t}.`),!1;zi.set(t,n);for(const e of Rr.values())va(e,n);for(const e of Bd.values())va(e,n);return!0}function jd(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Hd(n){return n==null?!1:n.settings!==void 0}const qd={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ie=new Gl("app","Firebase",qd);class zd{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ie.create("app-deleted",{appName:this._name})}}const Gd=Ud;function Xl(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:qi,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw ie.create("bad-app-name",{appName:String(s)});if(e||(e=zl()),!e)throw ie.create("no-options");const o=Rr.get(s);if(o){if(br(e,o.options)&&br(r,o.config))return o;throw ie.create("duplicate-app",{appName:s})}const a=new Qf(s);for(const f of zi.values())a.addComponent(f);const u=new zd(e,r,a);return Rr.set(s,u),u}function Wd(n=qi){const t=Rr.get(n);if(!t&&n===qi&&zl())return Xl();if(!t)throw ie.create("no-app",{appName:n});return t}function Fe(n,t,e){let r=$d[n]??n;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xt.warn(a.join(" "));return}Sr(new kn(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Kd="firebase-heartbeat-database",Qd=1,Dn="firebase-heartbeat-store";let Si=null;function Jl(){return Si||(Si=ld(Kd,Qd,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Dn)}catch(e){console.warn(e)}}}}).catch(n=>{throw ie.create("idb-open",{originalErrorMessage:n.message})})),Si}async function Xd(n){try{const e=(await Jl()).transaction(Dn),r=await e.objectStore(Dn).get(Yl(n));return await e.done,r}catch(t){if(t instanceof Je)Xt.warn(t.message);else{const e=ie.create("idb-get",{originalErrorMessage:t?.message});Xt.warn(e.message)}}}async function Ea(n,t){try{const r=(await Jl()).transaction(Dn,"readwrite");await r.objectStore(Dn).put(t,Yl(n)),await r.done}catch(e){if(e instanceof Je)Xt.warn(e.message);else{const r=ie.create("idb-set",{originalErrorMessage:e?.message});Xt.warn(r.message)}}}function Yl(n){return`${n.name}!${n.options.appId}`}const Jd=1024,Yd=30;class Zd{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ep(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ta();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>Yd){const s=np(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Xt.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ta(),{heartbeatsToSend:e,unsentEntries:r}=tp(this._heartbeatsCache.heartbeats),s=Ar(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Xt.warn(t),""}}}function Ta(){return new Date().toISOString().substring(0,10)}function tp(n,t=Jd){const e=[];let r=n.slice();for(const s of n){const o=e.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),wa(e)>t){o.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),wa(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class ep{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bf()?jf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Xd(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ea(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ea(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function wa(n){return Ar(JSON.stringify({version:2,heartbeats:n})).length}function np(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}function rp(n){Sr(new kn("platform-logger",t=>new hd(t),"PRIVATE")),Sr(new kn("heartbeat",t=>new Zd(t),"PRIVATE")),Fe(Hi,ya,n),Fe(Hi,ya,"esm2020"),Fe("fire-js","")}rp("");var ip="firebase",sp="12.7.0";Fe(ip,sp,"app");var Ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _s;(function(){var n;function t(w,g){function m(){}m.prototype=g.prototype,w.F=g.prototype,w.prototype=new m,w.prototype.constructor=w,w.D=function(T,v,A){for(var y=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)y[bt-2]=arguments[bt];return g.prototype[v].apply(T,y)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,m){m||(m=0);const T=Array(16);if(typeof g=="string")for(var v=0;v<16;++v)T[v]=g.charCodeAt(m++)|g.charCodeAt(m++)<<8|g.charCodeAt(m++)<<16|g.charCodeAt(m++)<<24;else for(v=0;v<16;++v)T[v]=g[m++]|g[m++]<<8|g[m++]<<16|g[m++]<<24;g=w.g[0],m=w.g[1],v=w.g[2];let A=w.g[3],y;y=g+(A^m&(v^A))+T[0]+3614090360&4294967295,g=m+(y<<7&4294967295|y>>>25),y=A+(v^g&(m^v))+T[1]+3905402710&4294967295,A=g+(y<<12&4294967295|y>>>20),y=v+(m^A&(g^m))+T[2]+606105819&4294967295,v=A+(y<<17&4294967295|y>>>15),y=m+(g^v&(A^g))+T[3]+3250441966&4294967295,m=v+(y<<22&4294967295|y>>>10),y=g+(A^m&(v^A))+T[4]+4118548399&4294967295,g=m+(y<<7&4294967295|y>>>25),y=A+(v^g&(m^v))+T[5]+1200080426&4294967295,A=g+(y<<12&4294967295|y>>>20),y=v+(m^A&(g^m))+T[6]+2821735955&4294967295,v=A+(y<<17&4294967295|y>>>15),y=m+(g^v&(A^g))+T[7]+4249261313&4294967295,m=v+(y<<22&4294967295|y>>>10),y=g+(A^m&(v^A))+T[8]+1770035416&4294967295,g=m+(y<<7&4294967295|y>>>25),y=A+(v^g&(m^v))+T[9]+2336552879&4294967295,A=g+(y<<12&4294967295|y>>>20),y=v+(m^A&(g^m))+T[10]+4294925233&4294967295,v=A+(y<<17&4294967295|y>>>15),y=m+(g^v&(A^g))+T[11]+2304563134&4294967295,m=v+(y<<22&4294967295|y>>>10),y=g+(A^m&(v^A))+T[12]+1804603682&4294967295,g=m+(y<<7&4294967295|y>>>25),y=A+(v^g&(m^v))+T[13]+4254626195&4294967295,A=g+(y<<12&4294967295|y>>>20),y=v+(m^A&(g^m))+T[14]+2792965006&4294967295,v=A+(y<<17&4294967295|y>>>15),y=m+(g^v&(A^g))+T[15]+1236535329&4294967295,m=v+(y<<22&4294967295|y>>>10),y=g+(v^A&(m^v))+T[1]+4129170786&4294967295,g=m+(y<<5&4294967295|y>>>27),y=A+(m^v&(g^m))+T[6]+3225465664&4294967295,A=g+(y<<9&4294967295|y>>>23),y=v+(g^m&(A^g))+T[11]+643717713&4294967295,v=A+(y<<14&4294967295|y>>>18),y=m+(A^g&(v^A))+T[0]+3921069994&4294967295,m=v+(y<<20&4294967295|y>>>12),y=g+(v^A&(m^v))+T[5]+3593408605&4294967295,g=m+(y<<5&4294967295|y>>>27),y=A+(m^v&(g^m))+T[10]+38016083&4294967295,A=g+(y<<9&4294967295|y>>>23),y=v+(g^m&(A^g))+T[15]+3634488961&4294967295,v=A+(y<<14&4294967295|y>>>18),y=m+(A^g&(v^A))+T[4]+3889429448&4294967295,m=v+(y<<20&4294967295|y>>>12),y=g+(v^A&(m^v))+T[9]+568446438&4294967295,g=m+(y<<5&4294967295|y>>>27),y=A+(m^v&(g^m))+T[14]+3275163606&4294967295,A=g+(y<<9&4294967295|y>>>23),y=v+(g^m&(A^g))+T[3]+4107603335&4294967295,v=A+(y<<14&4294967295|y>>>18),y=m+(A^g&(v^A))+T[8]+1163531501&4294967295,m=v+(y<<20&4294967295|y>>>12),y=g+(v^A&(m^v))+T[13]+2850285829&4294967295,g=m+(y<<5&4294967295|y>>>27),y=A+(m^v&(g^m))+T[2]+4243563512&4294967295,A=g+(y<<9&4294967295|y>>>23),y=v+(g^m&(A^g))+T[7]+1735328473&4294967295,v=A+(y<<14&4294967295|y>>>18),y=m+(A^g&(v^A))+T[12]+2368359562&4294967295,m=v+(y<<20&4294967295|y>>>12),y=g+(m^v^A)+T[5]+4294588738&4294967295,g=m+(y<<4&4294967295|y>>>28),y=A+(g^m^v)+T[8]+2272392833&4294967295,A=g+(y<<11&4294967295|y>>>21),y=v+(A^g^m)+T[11]+1839030562&4294967295,v=A+(y<<16&4294967295|y>>>16),y=m+(v^A^g)+T[14]+4259657740&4294967295,m=v+(y<<23&4294967295|y>>>9),y=g+(m^v^A)+T[1]+2763975236&4294967295,g=m+(y<<4&4294967295|y>>>28),y=A+(g^m^v)+T[4]+1272893353&4294967295,A=g+(y<<11&4294967295|y>>>21),y=v+(A^g^m)+T[7]+4139469664&4294967295,v=A+(y<<16&4294967295|y>>>16),y=m+(v^A^g)+T[10]+3200236656&4294967295,m=v+(y<<23&4294967295|y>>>9),y=g+(m^v^A)+T[13]+681279174&4294967295,g=m+(y<<4&4294967295|y>>>28),y=A+(g^m^v)+T[0]+3936430074&4294967295,A=g+(y<<11&4294967295|y>>>21),y=v+(A^g^m)+T[3]+3572445317&4294967295,v=A+(y<<16&4294967295|y>>>16),y=m+(v^A^g)+T[6]+76029189&4294967295,m=v+(y<<23&4294967295|y>>>9),y=g+(m^v^A)+T[9]+3654602809&4294967295,g=m+(y<<4&4294967295|y>>>28),y=A+(g^m^v)+T[12]+3873151461&4294967295,A=g+(y<<11&4294967295|y>>>21),y=v+(A^g^m)+T[15]+530742520&4294967295,v=A+(y<<16&4294967295|y>>>16),y=m+(v^A^g)+T[2]+3299628645&4294967295,m=v+(y<<23&4294967295|y>>>9),y=g+(v^(m|~A))+T[0]+4096336452&4294967295,g=m+(y<<6&4294967295|y>>>26),y=A+(m^(g|~v))+T[7]+1126891415&4294967295,A=g+(y<<10&4294967295|y>>>22),y=v+(g^(A|~m))+T[14]+2878612391&4294967295,v=A+(y<<15&4294967295|y>>>17),y=m+(A^(v|~g))+T[5]+4237533241&4294967295,m=v+(y<<21&4294967295|y>>>11),y=g+(v^(m|~A))+T[12]+1700485571&4294967295,g=m+(y<<6&4294967295|y>>>26),y=A+(m^(g|~v))+T[3]+2399980690&4294967295,A=g+(y<<10&4294967295|y>>>22),y=v+(g^(A|~m))+T[10]+4293915773&4294967295,v=A+(y<<15&4294967295|y>>>17),y=m+(A^(v|~g))+T[1]+2240044497&4294967295,m=v+(y<<21&4294967295|y>>>11),y=g+(v^(m|~A))+T[8]+1873313359&4294967295,g=m+(y<<6&4294967295|y>>>26),y=A+(m^(g|~v))+T[15]+4264355552&4294967295,A=g+(y<<10&4294967295|y>>>22),y=v+(g^(A|~m))+T[6]+2734768916&4294967295,v=A+(y<<15&4294967295|y>>>17),y=m+(A^(v|~g))+T[13]+1309151649&4294967295,m=v+(y<<21&4294967295|y>>>11),y=g+(v^(m|~A))+T[4]+4149444226&4294967295,g=m+(y<<6&4294967295|y>>>26),y=A+(m^(g|~v))+T[11]+3174756917&4294967295,A=g+(y<<10&4294967295|y>>>22),y=v+(g^(A|~m))+T[2]+718787259&4294967295,v=A+(y<<15&4294967295|y>>>17),y=m+(A^(v|~g))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(v+(y<<21&4294967295|y>>>11))&4294967295,w.g[2]=w.g[2]+v&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.v=function(w,g){g===void 0&&(g=w.length);const m=g-this.blockSize,T=this.C;let v=this.h,A=0;for(;A<g;){if(v==0)for(;A<=m;)s(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<g;)if(T[v++]=w.charCodeAt(A++),v==this.blockSize){s(this,T),v=0;break}}else for(;A<g;)if(T[v++]=w[A++],v==this.blockSize){s(this,T),v=0;break}}this.h=v,this.o+=g},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;g=this.o*8;for(var m=w.length-8;m<w.length;++m)w[m]=g&255,g/=256;for(this.v(w),w=Array(16),g=0,m=0;m<4;++m)for(let T=0;T<32;T+=8)w[g++]=this.g[m]>>>T&255;return w};function o(w,g){var m=u;return Object.prototype.hasOwnProperty.call(m,w)?m[w]:m[w]=g(w)}function a(w,g){this.h=g;const m=[];let T=!0;for(let v=w.length-1;v>=0;v--){const A=w[v]|0;T&&A==g||(m[v]=A,T=!1)}this.g=m}var u={};function f(w){return-128<=w&&w<128?o(w,function(g){return new a([g|0],g<0?-1:0)}):new a([w|0],w<0?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return D(h(-w));const g=[];let m=1;for(let T=0;w>=m;T++)g[T]=w/m|0,m*=4294967296;return new a(g,0)}function E(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return D(E(w.substring(1),g));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const m=h(Math.pow(g,8));let T=p;for(let A=0;A<w.length;A+=8){var v=Math.min(8,w.length-A);const y=parseInt(w.substring(A,A+v),g);v<8?(v=h(Math.pow(g,v)),T=T.j(v).add(h(y))):(T=T.j(m),T=T.add(h(y)))}return T}var p=f(0),I=f(1),S=f(16777216);n=a.prototype,n.m=function(){if(O(this))return-D(this).m();let w=0,g=1;for(let m=0;m<this.g.length;m++){const T=this.i(m);w+=(T>=0?T:4294967296+T)*g,g*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(k(this))return"0";if(O(this))return"-"+D(this).toString(w);const g=h(Math.pow(w,6));var m=this;let T="";for(;;){const v=z(m,g).g;m=M(m,v.j(g));let A=((m.g.length>0?m.g[0]:m.h)>>>0).toString(w);if(m=v,k(m))return A+T;for(;A.length<6;)A="0"+A;T=A+T}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function k(w){if(w.h!=0)return!1;for(let g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function O(w){return w.h==-1}n.l=function(w){return w=M(this,w),O(w)?-1:k(w)?0:1};function D(w){const g=w.g.length,m=[];for(let T=0;T<g;T++)m[T]=~w.g[T];return new a(m,~w.h).add(I)}n.abs=function(){return O(this)?D(this):this},n.add=function(w){const g=Math.max(this.g.length,w.g.length),m=[];let T=0;for(let v=0;v<=g;v++){let A=T+(this.i(v)&65535)+(w.i(v)&65535),y=(A>>>16)+(this.i(v)>>>16)+(w.i(v)>>>16);T=y>>>16,A&=65535,y&=65535,m[v]=y<<16|A}return new a(m,m[m.length-1]&-2147483648?-1:0)};function M(w,g){return w.add(D(g))}n.j=function(w){if(k(this)||k(w))return p;if(O(this))return O(w)?D(this).j(D(w)):D(D(this).j(w));if(O(w))return D(this.j(D(w)));if(this.l(S)<0&&w.l(S)<0)return h(this.m()*w.m());const g=this.g.length+w.g.length,m=[];for(var T=0;T<2*g;T++)m[T]=0;for(T=0;T<this.g.length;T++)for(let v=0;v<w.g.length;v++){const A=this.i(T)>>>16,y=this.i(T)&65535,bt=w.i(v)>>>16,he=w.i(v)&65535;m[2*T+2*v]+=y*he,N(m,2*T+2*v),m[2*T+2*v+1]+=A*he,N(m,2*T+2*v+1),m[2*T+2*v+1]+=y*bt,N(m,2*T+2*v+1),m[2*T+2*v+2]+=A*bt,N(m,2*T+2*v+2)}for(w=0;w<g;w++)m[w]=m[2*w+1]<<16|m[2*w];for(w=g;w<2*g;w++)m[w]=0;return new a(m,0)};function N(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function F(w,g){this.g=w,this.h=g}function z(w,g){if(k(g))throw Error("division by zero");if(k(w))return new F(p,p);if(O(w))return g=z(D(w),g),new F(D(g.g),D(g.h));if(O(g))return g=z(w,D(g)),new F(D(g.g),g.h);if(w.g.length>30){if(O(w)||O(g))throw Error("slowDivide_ only works with positive integers.");for(var m=I,T=g;T.l(w)<=0;)m=et(m),T=et(T);var v=W(m,1),A=W(T,1);for(T=W(T,2),m=W(m,2);!k(T);){var y=A.add(T);y.l(w)<=0&&(v=v.add(m),A=y),T=W(T,1),m=W(m,1)}return g=M(w,v.j(g)),new F(v,g)}for(v=p;w.l(g)>=0;){for(m=Math.max(1,Math.floor(w.m()/g.m())),T=Math.ceil(Math.log(m)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),A=h(m),y=A.j(g);O(y)||y.l(w)>0;)m-=T,A=h(m),y=A.j(g);k(A)&&(A=I),v=v.add(A),w=M(w,y)}return new F(v,w)}n.B=function(w){return z(this,w).h},n.and=function(w){const g=Math.max(this.g.length,w.g.length),m=[];for(let T=0;T<g;T++)m[T]=this.i(T)&w.i(T);return new a(m,this.h&w.h)},n.or=function(w){const g=Math.max(this.g.length,w.g.length),m=[];for(let T=0;T<g;T++)m[T]=this.i(T)|w.i(T);return new a(m,this.h|w.h)},n.xor=function(w){const g=Math.max(this.g.length,w.g.length),m=[];for(let T=0;T<g;T++)m[T]=this.i(T)^w.i(T);return new a(m,this.h^w.h)};function et(w){const g=w.g.length+1,m=[];for(let T=0;T<g;T++)m[T]=w.i(T)<<1|w.i(T-1)>>>31;return new a(m,w.h)}function W(w,g){const m=g>>5;g%=32;const T=w.g.length-m,v=[];for(let A=0;A<T;A++)v[A]=g>0?w.i(A+m)>>>g|w.i(A+m+1)<<32-g:w.i(A+m);return new a(v,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=E,_s=a}).apply(typeof Ia<"u"?Ia:typeof self<"u"?self:typeof window<"u"?window:{});var hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zl,En,tc,yr,Gi,ec,nc,rc;(function(){var n,t=Object.defineProperty;function e(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof hr=="object"&&hr];for(var l=0;l<i.length;++l){var c=i[l];if(c&&c.Math==Math)return c}throw Error("Cannot find global object")}var r=e(this);function s(i,l){if(l)t:{var c=r;i=i.split(".");for(var d=0;d<i.length-1;d++){var b=i[d];if(!(b in c))break t;c=c[b]}i=i[i.length-1],d=c[i],l=l(d),l!=d&&l!=null&&t(c,i,{configurable:!0,writable:!0,value:l})}}s("Symbol.dispose",function(i){return i||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(i){return i||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(i){return i||function(l){var c=[],d;for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&c.push([d,l[d]]);return c}});var o=o||{},a=this||self;function u(i){var l=typeof i;return l=="object"&&i!=null||l=="function"}function f(i,l,c){return i.call.apply(i.bind,arguments)}function h(i,l,c){return h=f,h.apply(null,arguments)}function E(i,l){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();return d.push.apply(d,arguments),i.apply(this,d)}}function p(i,l){function c(){}c.prototype=l.prototype,i.Z=l.prototype,i.prototype=new c,i.prototype.constructor=i,i.Ob=function(d,b,R){for(var V=Array(arguments.length-2),B=2;B<arguments.length;B++)V[B-2]=arguments[B];return l.prototype[b].apply(d,V)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?i=>i&&AsyncContext.Snapshot.wrap(i):i=>i;function S(i){const l=i.length;if(l>0){const c=Array(l);for(let d=0;d<l;d++)c[d]=i[d];return c}return[]}function k(i,l){for(let d=1;d<arguments.length;d++){const b=arguments[d];var c=typeof b;if(c=c!="object"?c:b?Array.isArray(b)?"array":c:"null",c=="array"||c=="object"&&typeof b.length=="number"){c=i.length||0;const R=b.length||0;i.length=c+R;for(let V=0;V<R;V++)i[c+V]=b[V]}else i.push(b)}}class O{constructor(l,c){this.i=l,this.j=c,this.h=0,this.g=null}get(){let l;return this.h>0?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function D(i){a.setTimeout(()=>{throw i},0)}function M(){var i=w;let l=null;return i.g&&(l=i.g,i.g=i.g.next,i.g||(i.h=null),l.next=null),l}class N{constructor(){this.h=this.g=null}add(l,c){const d=F.get();d.set(l,c),this.h?this.h.next=d:this.g=d,this.h=d}}var F=new O(()=>new z,i=>i.reset());class z{constructor(){this.next=this.g=this.h=null}set(l,c){this.h=l,this.g=c,this.next=null}reset(){this.next=this.g=this.h=null}}let et,W=!1,w=new N,g=()=>{const i=Promise.resolve(void 0);et=()=>{i.then(m)}};function m(){for(var i;i=M();){try{i.h.call(i.g)}catch(c){D(c)}var l=F;l.j(i),l.h<100&&(l.h++,i.next=l.g,l.g=i)}W=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function v(i,l){this.type=i,this.g=this.target=l,this.defaultPrevented=!1}v.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var i=!1,l=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const c=()=>{};a.addEventListener("test",c,l),a.removeEventListener("test",c,l)}catch{}return i})();function y(i){return/^[\s\xa0]*$/.test(i)}function bt(i,l){v.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i&&this.init(i,l)}p(bt,v),bt.prototype.init=function(i,l){const c=this.type=i.type,d=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;this.target=i.target||i.srcElement,this.g=l,l=i.relatedTarget,l||(c=="mouseover"?l=i.fromElement:c=="mouseout"&&(l=i.toElement)),this.relatedTarget=l,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=i.pointerType,this.state=i.state,this.i=i,i.defaultPrevented&&bt.Z.h.call(this)},bt.prototype.h=function(){bt.Z.h.call(this);const i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),lu=0;function cu(i,l,c,d,b){this.listener=i,this.proxy=null,this.src=l,this.type=c,this.capture=!!d,this.ha=b,this.key=++lu,this.da=this.fa=!1}function Wn(i){i.da=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Kn(i,l,c){for(const d in i)l.call(c,i[d],d,i)}function uu(i,l){for(const c in i)l.call(void 0,i[c],c,i)}function Fs(i){const l={};for(const c in i)l[c]=i[c];return l}const Us="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $s(i,l){let c,d;for(let b=1;b<arguments.length;b++){d=arguments[b];for(c in d)i[c]=d[c];for(let R=0;R<Us.length;R++)c=Us[R],Object.prototype.hasOwnProperty.call(d,c)&&(i[c]=d[c])}}function Qn(i){this.src=i,this.g={},this.h=0}Qn.prototype.add=function(i,l,c,d,b){const R=i.toString();i=this.g[R],i||(i=this.g[R]=[],this.h++);const V=Yr(i,l,d,b);return V>-1?(l=i[V],c||(l.fa=!1)):(l=new cu(l,this.src,R,!!d,b),l.fa=c,i.push(l)),l};function Jr(i,l){const c=l.type;if(c in i.g){var d=i.g[c],b=Array.prototype.indexOf.call(d,l,void 0),R;(R=b>=0)&&Array.prototype.splice.call(d,b,1),R&&(Wn(l),i.g[c].length==0&&(delete i.g[c],i.h--))}}function Yr(i,l,c,d){for(let b=0;b<i.length;++b){const R=i[b];if(!R.da&&R.listener==l&&R.capture==!!c&&R.ha==d)return b}return-1}var Zr="closure_lm_"+(Math.random()*1e6|0),ti={};function Bs(i,l,c,d,b){if(Array.isArray(l)){for(let R=0;R<l.length;R++)Bs(i,l[R],c,d,b);return null}return c=qs(c),i&&i[he]?i.J(l,c,u(d)?!!d.capture:!1,b):hu(i,l,c,!1,d,b)}function hu(i,l,c,d,b,R){if(!l)throw Error("Invalid event type");const V=u(b)?!!b.capture:!!b;let B=ni(i);if(B||(i[Zr]=B=new Qn(i)),c=B.add(l,c,d,V,R),c.proxy)return c;if(d=fu(),c.proxy=d,d.src=i,d.listener=c,i.addEventListener)A||(b=V),b===void 0&&(b=!1),i.addEventListener(l.toString(),d,b);else if(i.attachEvent)i.attachEvent(Hs(l.toString()),d);else if(i.addListener&&i.removeListener)i.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return c}function fu(){function i(c){return l.call(i.src,i.listener,c)}const l=du;return i}function js(i,l,c,d,b){if(Array.isArray(l))for(var R=0;R<l.length;R++)js(i,l[R],c,d,b);else d=u(d)?!!d.capture:!!d,c=qs(c),i&&i[he]?(i=i.i,R=String(l).toString(),R in i.g&&(l=i.g[R],c=Yr(l,c,d,b),c>-1&&(Wn(l[c]),Array.prototype.splice.call(l,c,1),l.length==0&&(delete i.g[R],i.h--)))):i&&(i=ni(i))&&(l=i.g[l.toString()],i=-1,l&&(i=Yr(l,c,d,b)),(c=i>-1?l[i]:null)&&ei(c))}function ei(i){if(typeof i!="number"&&i&&!i.da){var l=i.src;if(l&&l[he])Jr(l.i,i);else{var c=i.type,d=i.proxy;l.removeEventListener?l.removeEventListener(c,d,i.capture):l.detachEvent?l.detachEvent(Hs(c),d):l.addListener&&l.removeListener&&l.removeListener(d),(c=ni(l))?(Jr(c,i),c.h==0&&(c.src=null,l[Zr]=null)):Wn(i)}}}function Hs(i){return i in ti?ti[i]:ti[i]="on"+i}function du(i,l){if(i.da)i=!0;else{l=new bt(l,this);const c=i.listener,d=i.ha||i.src;i.fa&&ei(i),i=c.call(d,l)}return i}function ni(i){return i=i[Zr],i instanceof Qn?i:null}var ri="__closure_events_fn_"+(Math.random()*1e9>>>0);function qs(i){return typeof i=="function"?i:(i[ri]||(i[ri]=function(l){return i.handleEvent(l)}),i[ri])}function mt(){T.call(this),this.i=new Qn(this),this.M=this,this.G=null}p(mt,T),mt.prototype[he]=!0,mt.prototype.removeEventListener=function(i,l,c,d){js(this,i,l,c,d)};function wt(i,l){var c,d=i.G;if(d)for(c=[];d;d=d.G)c.push(d);if(i=i.M,d=l.type||l,typeof l=="string")l=new v(l,i);else if(l instanceof v)l.target=l.target||i;else{var b=l;l=new v(d,i),$s(l,b)}b=!0;let R,V;if(c)for(V=c.length-1;V>=0;V--)R=l.g=c[V],b=Xn(R,d,!0,l)&&b;if(R=l.g=i,b=Xn(R,d,!0,l)&&b,b=Xn(R,d,!1,l)&&b,c)for(V=0;V<c.length;V++)R=l.g=c[V],b=Xn(R,d,!1,l)&&b}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var i=this.i;for(const l in i.g){const c=i.g[l];for(let d=0;d<c.length;d++)Wn(c[d]);delete i.g[l],i.h--}}this.G=null},mt.prototype.J=function(i,l,c,d){return this.i.add(String(i),l,!1,c,d)},mt.prototype.K=function(i,l,c,d){return this.i.add(String(i),l,!0,c,d)};function Xn(i,l,c,d){if(l=i.i.g[String(l)],!l)return!0;l=l.concat();let b=!0;for(let R=0;R<l.length;++R){const V=l[R];if(V&&!V.da&&V.capture==c){const B=V.listener,lt=V.ha||V.src;V.fa&&Jr(i.i,V),b=B.call(lt,d)!==!1&&b}}return b&&!d.defaultPrevented}function pu(i,l){if(typeof i!="function")if(i&&typeof i.handleEvent=="function")i=h(i.handleEvent,i);else throw Error("Invalid listener argument");return Number(l)>2147483647?-1:a.setTimeout(i,l||0)}function zs(i){i.g=pu(()=>{i.g=null,i.i&&(i.i=!1,zs(i))},i.l);const l=i.h;i.h=null,i.m.apply(null,l)}class _u extends T{constructor(l,c){super(),this.m=l,this.l=c,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:zs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tn(i){T.call(this),this.h=i,this.g={}}p(tn,T);var Gs=[];function Ws(i){Kn(i.g,function(l,c){this.g.hasOwnProperty(c)&&ei(l)},i),i.g={}}tn.prototype.N=function(){tn.Z.N.call(this),Ws(this)},tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=a.JSON.stringify,mu=a.JSON.parse,gu=class{stringify(i){return a.JSON.stringify(i,void 0)}parse(i){return a.JSON.parse(i,void 0)}};function Ks(){}function Qs(){}var en={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function si(){v.call(this,"d")}p(si,v);function oi(){v.call(this,"c")}p(oi,v);var fe={},Xs=null;function Jn(){return Xs=Xs||new mt}fe.Ia="serverreachability";function Js(i){v.call(this,fe.Ia,i)}p(Js,v);function nn(i){const l=Jn();wt(l,new Js(l))}fe.STAT_EVENT="statevent";function Ys(i,l){v.call(this,fe.STAT_EVENT,i),this.stat=l}p(Ys,v);function It(i){const l=Jn();wt(l,new Ys(l,i))}fe.Ja="timingevent";function Zs(i,l){v.call(this,fe.Ja,i),this.size=l}p(Zs,v);function rn(i,l){if(typeof i!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){i()},l)}function sn(){this.g=!0}sn.prototype.ua=function(){this.g=!1};function yu(i,l,c,d,b,R){i.info(function(){if(i.g)if(R){var V="",B=R.split("&");for(let K=0;K<B.length;K++){var lt=B[K].split("=");if(lt.length>1){const ct=lt[0];lt=lt[1];const Lt=ct.split("_");V=Lt.length>=2&&Lt[1]=="type"?V+(ct+"="+lt+"&"):V+(ct+"=redacted&")}}}else V=null;else V=R;return"XMLHTTP REQ ("+d+") [attempt "+b+"]: "+l+`
`+c+`
`+V})}function vu(i,l,c,d,b,R,V){i.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+b+"]: "+l+`
`+c+`
`+R+" "+V})}function ke(i,l,c,d){i.info(function(){return"XMLHTTP TEXT ("+l+"): "+Tu(i,c)+(d?" "+d:"")})}function Eu(i,l){i.info(function(){return"TIMEOUT: "+l})}sn.prototype.info=function(){};function Tu(i,l){if(!i.g)return l;if(!l)return null;try{const R=JSON.parse(l);if(R){for(i=0;i<R.length;i++)if(Array.isArray(R[i])){var c=R[i];if(!(c.length<2)){var d=c[1];if(Array.isArray(d)&&!(d.length<1)){var b=d[0];if(b!="noop"&&b!="stop"&&b!="close")for(let V=1;V<d.length;V++)d[V]=""}}}}return ii(R)}catch{return l}}var Yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},to={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},eo;function ai(){}p(ai,Ks),ai.prototype.g=function(){return new XMLHttpRequest},eo=new ai;function on(i){return encodeURIComponent(String(i))}function wu(i){var l=1;i=i.split(":");const c=[];for(;l>0&&i.length;)c.push(i.shift()),l--;return i.length&&c.push(i.join(":")),c}function Jt(i,l,c,d){this.j=i,this.i=l,this.l=c,this.S=d||1,this.V=new tn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new no}function no(){this.i=null,this.g="",this.h=!1}var ro={},li={};function ci(i,l,c){i.M=1,i.A=tr(Mt(l)),i.u=c,i.R=!0,io(i,null)}function io(i,l){i.F=Date.now(),Zn(i),i.B=Mt(i.A);var c=i.B,d=i.S;Array.isArray(d)||(d=[String(d)]),yo(c.i,"t",d),i.C=0,c=i.j.L,i.h=new no,i.g=Mo(i.j,c?l:null,!i.u),i.P>0&&(i.O=new _u(h(i.Y,i,i.g),i.P)),l=i.V,c=i.g,d=i.ba;var b="readystatechange";Array.isArray(b)||(b&&(Gs[0]=b.toString()),b=Gs);for(let R=0;R<b.length;R++){const V=Bs(c,b[R],d||l.handleEvent,!1,l.h||l);if(!V)break;l.g[V.key]=V}l=i.J?Fs(i.J):{},i.u?(i.v||(i.v="POST"),l["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.B,i.v,i.u,l)):(i.v="GET",i.g.ea(i.B,i.v,null,l)),nn(),yu(i.i,i.v,i.B,i.l,i.S,i.u)}Jt.prototype.ba=function(i){i=i.target;const l=this.O;l&&te(i)==3?l.j():this.Y(i)},Jt.prototype.Y=function(i){try{if(i==this.g)t:{const B=te(this.g),lt=this.g.ya(),K=this.g.ca();if(!(B<3)&&(B!=3||this.g&&(this.h.h||this.g.la()||bo(this.g)))){this.K||B!=4||lt==7||(lt==8||K<=0?nn(3):nn(2)),ui(this);var l=this.g.ca();this.X=l;var c=Iu(this);if(this.o=l==200,vu(this.i,this.v,this.B,this.l,this.S,B,l),this.o){if(this.U&&!this.L){e:{if(this.g){var d,b=this.g;if((d=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(d)){var R=d;break e}}R=null}if(i=R)ke(this.i,this.l,i,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hi(this,i);else{this.o=!1,this.m=3,It(12),de(this),an(this);break t}}if(this.R){i=!0;let ct;for(;!this.K&&this.C<c.length;)if(ct=Au(this,c),ct==li){B==4&&(this.m=4,It(14),i=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==ro){this.m=4,It(15),ke(this.i,this.l,c,"[Invalid Chunk]"),i=!1;break}else ke(this.i,this.l,ct,null),hi(this,ct);if(so(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),B!=4||c.length!=0||this.h.h||(this.m=1,It(16),i=!1),this.o=this.o&&i,!i)ke(this.i,this.l,c,"[Invalid Chunked Response]"),de(this),an(this);else if(c.length>0&&!this.W){this.W=!0;var V=this.j;V.g==this&&V.aa&&!V.P&&(V.j.info("Great, no buffering proxy detected. Bytes received: "+c.length),vi(V),V.P=!0,It(11))}}else ke(this.i,this.l,c,null),hi(this,c);B==4&&de(this),this.o&&!this.K&&(B==4?Do(this.j,this):(this.o=!1,Zn(this)))}else Fu(this.g),l==400&&c.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),de(this),an(this)}}}catch{}finally{}};function Iu(i){if(!so(i))return i.g.la();const l=bo(i.g);if(l==="")return"";let c="";const d=l.length,b=te(i.g)==4;if(!i.h.i){if(typeof TextDecoder>"u")return de(i),an(i),"";i.h.i=new a.TextDecoder}for(let R=0;R<d;R++)i.h.h=!0,c+=i.h.i.decode(l[R],{stream:!(b&&R==d-1)});return l.length=0,i.h.g+=c,i.C=0,i.h.g}function so(i){return i.g?i.v=="GET"&&i.M!=2&&i.j.Aa:!1}function Au(i,l){var c=i.C,d=l.indexOf(`
`,c);return d==-1?li:(c=Number(l.substring(c,d)),isNaN(c)?ro:(d+=1,d+c>l.length?li:(l=l.slice(d,d+c),i.C=d+c,l)))}Jt.prototype.cancel=function(){this.K=!0,de(this)};function Zn(i){i.T=Date.now()+i.H,oo(i,i.H)}function oo(i,l){if(i.D!=null)throw Error("WatchDog timer not null");i.D=rn(h(i.aa,i),l)}function ui(i){i.D&&(a.clearTimeout(i.D),i.D=null)}Jt.prototype.aa=function(){this.D=null;const i=Date.now();i-this.T>=0?(Eu(this.i,this.B),this.M!=2&&(nn(),It(17)),de(this),this.m=2,an(this)):oo(this,this.T-i)};function an(i){i.j.I==0||i.K||Do(i.j,i)}function de(i){ui(i);var l=i.O;l&&typeof l.dispose=="function"&&l.dispose(),i.O=null,Ws(i.V),i.g&&(l=i.g,i.g=null,l.abort(),l.dispose())}function hi(i,l){try{var c=i.j;if(c.I!=0&&(c.g==i||fi(c.h,i))){if(!i.L&&fi(c.h,i)&&c.I==3){try{var d=c.Ba.g.parse(l)}catch{d=null}if(Array.isArray(d)&&d.length==3){var b=d;if(b[0]==0){t:if(!c.v){if(c.g)if(c.g.F+3e3<i.F)sr(c),rr(c);else break t;yi(c),It(18)}}else c.xa=b[1],0<c.xa-c.K&&b[2]<37500&&c.F&&c.A==0&&!c.C&&(c.C=rn(h(c.Va,c),6e3));co(c.h)<=1&&c.ta&&(c.ta=void 0)}else _e(c,11)}else if((i.L||c.g==i)&&sr(c),!y(l))for(b=c.Ba.g.parse(l),l=0;l<b.length;l++){let K=b[l];const ct=K[0];if(!(ct<=c.K))if(c.K=ct,K=K[1],c.I==2)if(K[0]=="c"){c.M=K[1],c.ba=K[2];const Lt=K[3];Lt!=null&&(c.ka=Lt,c.j.info("VER="+c.ka));const me=K[4];me!=null&&(c.za=me,c.j.info("SVER="+c.za));const ee=K[5];ee!=null&&typeof ee=="number"&&ee>0&&(d=1.5*ee,c.O=d,c.j.info("backChannelRequestTimeoutMs_="+d)),d=c;const ne=i.g;if(ne){const ar=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ar){var R=d.h;R.g||ar.indexOf("spdy")==-1&&ar.indexOf("quic")==-1&&ar.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(di(R,R.h),R.h=null))}if(d.G){const Ei=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;Ei&&(d.wa=Ei,X(d.J,d.G,Ei))}}c.I=3,c.l&&c.l.ra(),c.aa&&(c.T=Date.now()-i.F,c.j.info("Handshake RTT: "+c.T+"ms")),d=c;var V=i;if(d.na=Oo(d,d.L?d.ba:null,d.W),V.L){uo(d.h,V);var B=V,lt=d.O;lt&&(B.H=lt),B.D&&(ui(B),Zn(B)),d.g=V}else Vo(d);c.i.length>0&&ir(c)}else K[0]!="stop"&&K[0]!="close"||_e(c,7);else c.I==3&&(K[0]=="stop"||K[0]=="close"?K[0]=="stop"?_e(c,7):gi(c):K[0]!="noop"&&c.l&&c.l.qa(K),c.A=0)}}nn(4)}catch{}}var bu=class{constructor(i,l){this.g=i,this.map=l}};function ao(i){this.l=i||10,a.PerformanceNavigationTiming?(i=a.performance.getEntriesByType("navigation"),i=i.length>0&&(i[0].nextHopProtocol=="hq"||i[0].nextHopProtocol=="h2")):i=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=i?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lo(i){return i.h?!0:i.g?i.g.size>=i.j:!1}function co(i){return i.h?1:i.g?i.g.size:0}function fi(i,l){return i.h?i.h==l:i.g?i.g.has(l):!1}function di(i,l){i.g?i.g.add(l):i.h=l}function uo(i,l){i.h&&i.h==l?i.h=null:i.g&&i.g.has(l)&&i.g.delete(l)}ao.prototype.cancel=function(){if(this.i=ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const i of this.g.values())i.cancel();this.g.clear()}};function ho(i){if(i.h!=null)return i.i.concat(i.h.G);if(i.g!=null&&i.g.size!==0){let l=i.i;for(const c of i.g.values())l=l.concat(c.G);return l}return S(i.i)}var fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ru(i,l){if(i){i=i.split("&");for(let c=0;c<i.length;c++){const d=i[c].indexOf("=");let b,R=null;d>=0?(b=i[c].substring(0,d),R=i[c].substring(d+1)):b=i[c],l(b,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Yt(i){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let l;i instanceof Yt?(this.l=i.l,ln(this,i.j),this.o=i.o,this.g=i.g,cn(this,i.u),this.h=i.h,pi(this,vo(i.i)),this.m=i.m):i&&(l=String(i).match(fo))?(this.l=!1,ln(this,l[1]||"",!0),this.o=un(l[2]||""),this.g=un(l[3]||"",!0),cn(this,l[4]),this.h=un(l[5]||"",!0),pi(this,l[6]||"",!0),this.m=un(l[7]||"")):(this.l=!1,this.i=new fn(null,this.l))}Yt.prototype.toString=function(){const i=[];var l=this.j;l&&i.push(hn(l,po,!0),":");var c=this.g;return(c||l=="file")&&(i.push("//"),(l=this.o)&&i.push(hn(l,po,!0),"@"),i.push(on(c).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.u,c!=null&&i.push(":",String(c))),(c=this.h)&&(this.g&&c.charAt(0)!="/"&&i.push("/"),i.push(hn(c,c.charAt(0)=="/"?Pu:Cu,!0))),(c=this.i.toString())&&i.push("?",c),(c=this.m)&&i.push("#",hn(c,ku)),i.join("")},Yt.prototype.resolve=function(i){const l=Mt(this);let c=!!i.j;c?ln(l,i.j):c=!!i.o,c?l.o=i.o:c=!!i.g,c?l.g=i.g:c=i.u!=null;var d=i.h;if(c)cn(l,i.u);else if(c=!!i.h){if(d.charAt(0)!="/")if(this.g&&!this.h)d="/"+d;else{var b=l.h.lastIndexOf("/");b!=-1&&(d=l.h.slice(0,b+1)+d)}if(b=d,b==".."||b==".")d="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){d=b.lastIndexOf("/",0)==0,b=b.split("/");const R=[];for(let V=0;V<b.length;){const B=b[V++];B=="."?d&&V==b.length&&R.push(""):B==".."?((R.length>1||R.length==1&&R[0]!="")&&R.pop(),d&&V==b.length&&R.push("")):(R.push(B),d=!0)}d=R.join("/")}else d=b}return c?l.h=d:c=i.i.toString()!=="",c?pi(l,vo(i.i)):c=!!i.m,c&&(l.m=i.m),l};function Mt(i){return new Yt(i)}function ln(i,l,c){i.j=c?un(l,!0):l,i.j&&(i.j=i.j.replace(/:$/,""))}function cn(i,l){if(l){if(l=Number(l),isNaN(l)||l<0)throw Error("Bad port number "+l);i.u=l}else i.u=null}function pi(i,l,c){l instanceof fn?(i.i=l,Du(i.i,i.l)):(c||(l=hn(l,Vu)),i.i=new fn(l,i.l))}function X(i,l,c){i.i.set(l,c)}function tr(i){return X(i,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),i}function un(i,l){return i?l?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function hn(i,l,c){return typeof i=="string"?(i=encodeURI(i).replace(l,Su),c&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Su(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var po=/[#\/\?@]/g,Cu=/[#\?:]/g,Pu=/[#\?]/g,Vu=/[#\?@]/g,ku=/#/g;function fn(i,l){this.h=this.g=null,this.i=i||null,this.j=!!l}function pe(i){i.g||(i.g=new Map,i.h=0,i.i&&Ru(i.i,function(l,c){i.add(decodeURIComponent(l.replace(/\+/g," ")),c)}))}n=fn.prototype,n.add=function(i,l){pe(this),this.i=null,i=De(this,i);let c=this.g.get(i);return c||this.g.set(i,c=[]),c.push(l),this.h+=1,this};function _o(i,l){pe(i),l=De(i,l),i.g.has(l)&&(i.i=null,i.h-=i.g.get(l).length,i.g.delete(l))}function mo(i,l){return pe(i),l=De(i,l),i.g.has(l)}n.forEach=function(i,l){pe(this),this.g.forEach(function(c,d){c.forEach(function(b){i.call(l,b,d,this)},this)},this)};function go(i,l){pe(i);let c=[];if(typeof l=="string")mo(i,l)&&(c=c.concat(i.g.get(De(i,l))));else for(i=Array.from(i.g.values()),l=0;l<i.length;l++)c=c.concat(i[l]);return c}n.set=function(i,l){return pe(this),this.i=null,i=De(this,i),mo(this,i)&&(this.h-=this.g.get(i).length),this.g.set(i,[l]),this.h+=1,this},n.get=function(i,l){return i?(i=go(this,i),i.length>0?String(i[0]):l):l};function yo(i,l,c){_o(i,l),c.length>0&&(i.i=null,i.g.set(De(i,l),S(c)),i.h+=c.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],l=Array.from(this.g.keys());for(let d=0;d<l.length;d++){var c=l[d];const b=on(c);c=go(this,c);for(let R=0;R<c.length;R++){let V=b;c[R]!==""&&(V+="="+on(c[R])),i.push(V)}}return this.i=i.join("&")};function vo(i){const l=new fn;return l.i=i.i,i.g&&(l.g=new Map(i.g),l.h=i.h),l}function De(i,l){return l=String(l),i.j&&(l=l.toLowerCase()),l}function Du(i,l){l&&!i.j&&(pe(i),i.i=null,i.g.forEach(function(c,d){const b=d.toLowerCase();d!=b&&(_o(this,d),yo(this,b,c))},i)),i.j=l}function Nu(i,l){const c=new sn;if(a.Image){const d=new Image;d.onload=E(Zt,c,"TestLoadImage: loaded",!0,l,d),d.onerror=E(Zt,c,"TestLoadImage: error",!1,l,d),d.onabort=E(Zt,c,"TestLoadImage: abort",!1,l,d),d.ontimeout=E(Zt,c,"TestLoadImage: timeout",!1,l,d),a.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=i}else l(!1)}function xu(i,l){const c=new sn,d=new AbortController,b=setTimeout(()=>{d.abort(),Zt(c,"TestPingServer: timeout",!1,l)},1e4);fetch(i,{signal:d.signal}).then(R=>{clearTimeout(b),R.ok?Zt(c,"TestPingServer: ok",!0,l):Zt(c,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(b),Zt(c,"TestPingServer: error",!1,l)})}function Zt(i,l,c,d,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),d(c)}catch{}}function Ou(){this.g=new gu}function _i(i){this.i=i.Sb||null,this.h=i.ab||!1}p(_i,Ks),_i.prototype.g=function(){return new er(this.i,this.h)};function er(i,l){mt.call(this),this.H=i,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(er,mt),n=er.prototype,n.open=function(i,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=i,this.D=l,this.readyState=1,pn(this)},n.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const l={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};i&&(l.body=i),(this.H||a).fetch(new Request(this.D,l)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,dn(this)),this.readyState=0},n.Pa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if(this.responseType==="arraybuffer")i.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Eo(this)}else i.text().then(this.Oa.bind(this),this.ga.bind(this))};function Eo(i){i.j.read().then(i.Ma.bind(i)).catch(i.ga.bind(i))}n.Ma=function(i){if(this.g){if(this.o&&i.value)this.response.push(i.value);else if(!this.o){var l=i.value?i.value:new Uint8Array(0);(l=this.B.decode(l,{stream:!i.done}))&&(this.response=this.responseText+=l)}i.done?dn(this):pn(this),this.readyState==3&&Eo(this)}},n.Oa=function(i){this.g&&(this.response=this.responseText=i,dn(this))},n.Na=function(i){this.g&&(this.response=i,dn(this))},n.ga=function(){this.g&&dn(this)};function dn(i){i.readyState=4,i.l=null,i.j=null,i.B=null,pn(i)}n.setRequestHeader=function(i,l){this.A.append(i,l)},n.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],l=this.h.entries();for(var c=l.next();!c.done;)c=c.value,i.push(c[0]+": "+c[1]),c=l.next();return i.join(`\r
`)};function pn(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(i){this.m=i?"include":"same-origin"}});function To(i){let l="";return Kn(i,function(c,d){l+=d,l+=":",l+=c,l+=`\r
`}),l}function mi(i,l,c){t:{for(d in c){var d=!1;break t}d=!0}d||(c=To(c),typeof i=="string"?c!=null&&on(c):X(i,l,c))}function it(i){mt.call(this),this.headers=new Map,this.L=i||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(it,mt);var Mu=/^https?$/i,Lu=["POST","PUT"];n=it.prototype,n.Fa=function(i){this.H=i},n.ea=function(i,l,c,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+i);l=l?l.toUpperCase():"GET",this.D=i,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():eo.g(),this.g.onreadystatechange=I(h(this.Ca,this));try{this.B=!0,this.g.open(l,String(i),!0),this.B=!1}catch(R){wo(this,R);return}if(i=c||"",c=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var b in d)c.set(b,d[b]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(const R of d.keys())c.set(R,d.get(R));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(c.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&i instanceof a.FormData,!(Array.prototype.indexOf.call(Lu,l,void 0)>=0)||d||b||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,V]of c)this.g.setRequestHeader(R,V);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(i),this.v=!1}catch(R){wo(this,R)}};function wo(i,l){i.h=!1,i.g&&(i.j=!0,i.g.abort(),i.j=!1),i.l=l,i.o=5,Io(i),nr(i)}function Io(i){i.A||(i.A=!0,wt(i,"complete"),wt(i,"error"))}n.abort=function(i){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=i||7,wt(this,"complete"),wt(this,"abort"),nr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nr(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ao(this):this.Xa())},n.Xa=function(){Ao(this)};function Ao(i){if(i.h&&typeof o<"u"){if(i.v&&te(i)==4)setTimeout(i.Ca.bind(i),0);else if(wt(i,"readystatechange"),te(i)==4){i.h=!1;try{const R=i.ca();t:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break t;default:l=!1}var c;if(!(c=l)){var d;if(d=R===0){let V=String(i.D).match(fo)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),d=!Mu.test(V?V.toLowerCase():"")}c=d}if(c)wt(i,"complete"),wt(i,"success");else{i.o=6;try{var b=te(i)>2?i.g.statusText:""}catch{b=""}i.l=b+" ["+i.ca()+"]",Io(i)}}finally{nr(i)}}}}function nr(i,l){if(i.g){i.m&&(clearTimeout(i.m),i.m=null);const c=i.g;i.g=null,l||wt(i,"ready");try{c.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function te(i){return i.g?i.g.readyState:0}n.ca=function(){try{return te(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(i){if(this.g){var l=this.g.responseText;return i&&l.indexOf(i)==0&&(l=l.substring(i.length)),mu(l)}};function bo(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.F){case"":case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Fu(i){const l={};i=(i.g&&te(i)>=2&&i.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<i.length;d++){if(y(i[d]))continue;var c=wu(i[d]);const b=c[0];if(c=c[1],typeof c!="string")continue;c=c.trim();const R=l[b]||[];l[b]=R,R.push(c)}uu(l,function(d){return d.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _n(i,l,c){return c&&c.internalChannelParams&&c.internalChannelParams[i]||l}function Ro(i){this.za=0,this.i=[],this.j=new sn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_n("failFast",!1,i),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_n("baseRetryDelayMs",5e3,i),this.Za=_n("retryDelaySeedMs",1e4,i),this.Ta=_n("forwardChannelMaxRetries",2,i),this.va=_n("forwardChannelRequestTimeoutMs",2e4,i),this.ma=i&&i.xmlHttpFactory||void 0,this.Ua=i&&i.Rb||void 0,this.Aa=i&&i.useFetchStreams||!1,this.O=void 0,this.L=i&&i.supportsCrossDomainXhr||!1,this.M="",this.h=new ao(i&&i.concurrentRequestLimit),this.Ba=new Ou,this.S=i&&i.fastHandshake||!1,this.R=i&&i.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=i&&i.Pb||!1,i&&i.ua&&this.j.ua(),i&&i.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&i&&i.detectBufferingProxy||!1,this.ia=void 0,i&&i.longPollingTimeout&&i.longPollingTimeout>0&&(this.ia=i.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ro.prototype,n.ka=8,n.I=1,n.connect=function(i,l,c,d){It(0),this.W=i,this.H=l||{},c&&d!==void 0&&(this.H.OSID=c,this.H.OAID=d),this.F=this.X,this.J=Oo(this,null,this.W),ir(this)};function gi(i){if(So(i),i.I==3){var l=i.V++,c=Mt(i.J);if(X(c,"SID",i.M),X(c,"RID",l),X(c,"TYPE","terminate"),mn(i,c),l=new Jt(i,i.j,l),l.M=2,l.A=tr(Mt(c)),c=!1,a.navigator&&a.navigator.sendBeacon)try{c=a.navigator.sendBeacon(l.A.toString(),"")}catch{}!c&&a.Image&&(new Image().src=l.A,c=!0),c||(l.g=Mo(l.j,null),l.g.ea(l.A)),l.F=Date.now(),Zn(l)}xo(i)}function rr(i){i.g&&(vi(i),i.g.cancel(),i.g=null)}function So(i){rr(i),i.v&&(a.clearTimeout(i.v),i.v=null),sr(i),i.h.cancel(),i.m&&(typeof i.m=="number"&&a.clearTimeout(i.m),i.m=null)}function ir(i){if(!lo(i.h)&&!i.m){i.m=!0;var l=i.Ea;et||g(),W||(et(),W=!0),w.add(l,i),i.D=0}}function Uu(i,l){return co(i.h)>=i.h.j-(i.m?1:0)?!1:i.m?(i.i=l.G.concat(i.i),!0):i.I==1||i.I==2||i.D>=(i.Sa?0:i.Ta)?!1:(i.m=rn(h(i.Ea,i,l),No(i,i.D)),i.D++,!0)}n.Ea=function(i){if(this.m)if(this.m=null,this.I==1){if(!i){this.V=Math.floor(Math.random()*1e5),i=this.V++;const b=new Jt(this,this.j,i);let R=this.o;if(this.U&&(R?(R=Fs(R),$s(R,this.U)):R=this.U),this.u!==null||this.R||(b.J=R,R=null),this.S)t:{for(var l=0,c=0;c<this.i.length;c++){e:{var d=this.i[c];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break e}d=void 0}if(d===void 0)break;if(l+=d,l>4096){l=c;break t}if(l===4096||c===this.i.length-1){l=c+1;break t}}l=1e3}else l=1e3;l=Po(this,b,l),c=Mt(this.J),X(c,"RID",i),X(c,"CVER",22),this.G&&X(c,"X-HTTP-Session-Id",this.G),mn(this,c),R&&(this.R?l="headers="+on(To(R))+"&"+l:this.u&&mi(c,this.u,R)),di(this.h,b),this.Ra&&X(c,"TYPE","init"),this.S?(X(c,"$req",l),X(c,"SID","null"),b.U=!0,ci(b,c,null)):ci(b,c,l),this.I=2}}else this.I==3&&(i?Co(this,i):this.i.length==0||lo(this.h)||Co(this))};function Co(i,l){var c;l?c=l.l:c=i.V++;const d=Mt(i.J);X(d,"SID",i.M),X(d,"RID",c),X(d,"AID",i.K),mn(i,d),i.u&&i.o&&mi(d,i.u,i.o),c=new Jt(i,i.j,c,i.D+1),i.u===null&&(c.J=i.o),l&&(i.i=l.G.concat(i.i)),l=Po(i,c,1e3),c.H=Math.round(i.va*.5)+Math.round(i.va*.5*Math.random()),di(i.h,c),ci(c,d,l)}function mn(i,l){i.H&&Kn(i.H,function(c,d){X(l,d,c)}),i.l&&Kn({},function(c,d){X(l,d,c)})}function Po(i,l,c){c=Math.min(i.i.length,c);const d=i.l?h(i.l.Ka,i.l,i):null;t:{var b=i.i;let B=-1;for(;;){const lt=["count="+c];B==-1?c>0?(B=b[0].g,lt.push("ofs="+B)):B=0:lt.push("ofs="+B);let K=!0;for(let ct=0;ct<c;ct++){var R=b[ct].g;const Lt=b[ct].map;if(R-=B,R<0)B=Math.max(0,b[ct].g-100),K=!1;else try{R="req"+R+"_"||"";try{var V=Lt instanceof Map?Lt:Object.entries(Lt);for(const[me,ee]of V){let ne=ee;u(ee)&&(ne=ii(ee)),lt.push(R+me+"="+encodeURIComponent(ne))}}catch(me){throw lt.push(R+"type="+encodeURIComponent("_badmap")),me}}catch{d&&d(Lt)}}if(K){V=lt.join("&");break t}}V=void 0}return i=i.i.splice(0,c),l.G=i,V}function Vo(i){if(!i.g&&!i.v){i.Y=1;var l=i.Da;et||g(),W||(et(),W=!0),w.add(l,i),i.A=0}}function yi(i){return i.g||i.v||i.A>=3?!1:(i.Y++,i.v=rn(h(i.Da,i),No(i,i.A)),i.A++,!0)}n.Da=function(){if(this.v=null,ko(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var i=4*this.T;this.j.info("BP detection timer enabled: "+i),this.B=rn(h(this.Wa,this),i)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),rr(this),ko(this))};function vi(i){i.B!=null&&(a.clearTimeout(i.B),i.B=null)}function ko(i){i.g=new Jt(i,i.j,"rpc",i.Y),i.u===null&&(i.g.J=i.o),i.g.P=0;var l=Mt(i.na);X(l,"RID","rpc"),X(l,"SID",i.M),X(l,"AID",i.K),X(l,"CI",i.F?"0":"1"),!i.F&&i.ia&&X(l,"TO",i.ia),X(l,"TYPE","xmlhttp"),mn(i,l),i.u&&i.o&&mi(l,i.u,i.o),i.O&&(i.g.H=i.O);var c=i.g;i=i.ba,c.M=1,c.A=tr(Mt(l)),c.u=null,c.R=!0,io(c,i)}n.Va=function(){this.C!=null&&(this.C=null,rr(this),yi(this),It(19))};function sr(i){i.C!=null&&(a.clearTimeout(i.C),i.C=null)}function Do(i,l){var c=null;if(i.g==l){sr(i),vi(i),i.g=null;var d=2}else if(fi(i.h,l))c=l.G,uo(i.h,l),d=1;else return;if(i.I!=0){if(l.o)if(d==1){c=l.u?l.u.length:0,l=Date.now()-l.F;var b=i.D;d=Jn(),wt(d,new Zs(d,c)),ir(i)}else Vo(i);else if(b=l.m,b==3||b==0&&l.X>0||!(d==1&&Uu(i,l)||d==2&&yi(i)))switch(c&&c.length>0&&(l=i.h,l.i=l.i.concat(c)),b){case 1:_e(i,5);break;case 4:_e(i,10);break;case 3:_e(i,6);break;default:_e(i,2)}}}function No(i,l){let c=i.Qa+Math.floor(Math.random()*i.Za);return i.isActive()||(c*=2),c*l}function _e(i,l){if(i.j.info("Error code "+l),l==2){var c=h(i.bb,i),d=i.Ua;const b=!d;d=new Yt(d||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ln(d,"https"),tr(d),b?Nu(d.toString(),c):xu(d.toString(),c)}else It(2);i.I=0,i.l&&i.l.pa(l),xo(i),So(i)}n.bb=function(i){i?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function xo(i){if(i.I=0,i.ja=[],i.l){const l=ho(i.h);(l.length!=0||i.i.length!=0)&&(k(i.ja,l),k(i.ja,i.i),i.h.i.length=0,S(i.i),i.i.length=0),i.l.oa()}}function Oo(i,l,c){var d=c instanceof Yt?Mt(c):new Yt(c);if(d.g!="")l&&(d.g=l+"."+d.g),cn(d,d.u);else{var b=a.location;d=b.protocol,l=l?l+"."+b.hostname:b.hostname,b=+b.port;const R=new Yt(null);d&&ln(R,d),l&&(R.g=l),b&&cn(R,b),c&&(R.h=c),d=R}return c=i.G,l=i.wa,c&&l&&X(d,c,l),X(d,"VER",i.ka),mn(i,d),d}function Mo(i,l,c){if(l&&!i.L)throw Error("Can't create secondary domain capable XhrIo object.");return l=i.Aa&&!i.ma?new it(new _i({ab:c})):new it(i.ma),l.Fa(i.L),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lo(){}n=Lo.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function or(){}or.prototype.g=function(i,l){return new Ct(i,l)};function Ct(i,l){mt.call(this),this.g=new Ro(l),this.l=i,this.h=l&&l.messageUrlParams||null,i=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.o=i,i=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(i?i["X-WebChannel-Content-Type"]=l.messageContentType:i={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.sa&&(i?i["X-WebChannel-Client-Profile"]=l.sa:i={"X-WebChannel-Client-Profile":l.sa}),this.g.U=i,(i=l&&l.Qb)&&!y(i)&&(this.g.u=i),this.A=l&&l.supportsCrossDomainXhr||!1,this.v=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!y(l)&&(this.g.G=l,i=this.h,i!==null&&l in i&&(i=this.h,l in i&&delete i[l])),this.j=new Ne(this)}p(Ct,mt),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){gi(this.g)},Ct.prototype.o=function(i){var l=this.g;if(typeof i=="string"){var c={};c.__data__=i,i=c}else this.v&&(c={},c.__data__=ii(i),i=c);l.i.push(new bu(l.Ya++,i)),l.I==3&&ir(l)},Ct.prototype.N=function(){this.g.l=null,delete this.j,gi(this.g),delete this.g,Ct.Z.N.call(this)};function Fo(i){si.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var l=i.__sm__;if(l){t:{for(const c in l){i=c;break t}i=void 0}(this.i=i)&&(i=this.i,l=l!==null&&i in l?l[i]:void 0),this.data=l}else this.data=i}p(Fo,si);function Uo(){oi.call(this),this.status=1}p(Uo,oi);function Ne(i){this.g=i}p(Ne,Lo),Ne.prototype.ra=function(){wt(this.g,"a")},Ne.prototype.qa=function(i){wt(this.g,new Fo(i))},Ne.prototype.pa=function(i){wt(this.g,new Uo)},Ne.prototype.oa=function(){wt(this.g,"b")},or.prototype.createWebChannel=or.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,rc=function(){return new or},nc=function(){return Jn()},ec=fe,Gi={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,yr=Yn,to.COMPLETE="complete",tc=to,Qs.EventType=en,en.OPEN="a",en.CLOSE="b",en.ERROR="c",en.MESSAGE="d",mt.prototype.listen=mt.prototype.J,En=Qs,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,Zl=it}).apply(typeof hr<"u"?hr:typeof self<"u"?self:typeof window<"u"?window:{});const Aa="@firebase/firestore",ba="4.9.3";class vt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");let Ye="12.7.0";const Ae=new Wl("@firebase/firestore");function Me(){return Ae.logLevel}function x(n,...t){if(Ae.logLevel<=q.DEBUG){const e=t.map(ms);Ae.debug(`Firestore (${Ye}): ${n}`,...e)}}function be(n,...t){if(Ae.logLevel<=q.ERROR){const e=t.map(ms);Ae.error(`Firestore (${Ye}): ${n}`,...e)}}function jr(n,...t){if(Ae.logLevel<=q.WARN){const e=t.map(ms);Ae.warn(`Firestore (${Ye}): ${n}`,...e)}}function ms(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function j(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,ic(n,r,e)}function ic(n,t,e){let r=`FIRESTORE (${Ye}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw be(r),new Error(r)}function st(n,t,e,r){let s="Unexpected state";typeof e=="string"?s=e:r=e,n||ic(t,s,r)}function Q(n,t){return n}const P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Je{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Te{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class sc{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class op{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(vt.UNAUTHENTICATED)))}shutdown(){}}class ap{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class lp{constructor(t){this.t=t,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){st(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,e(f)):Promise.resolve();let o=new Te;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Te,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const f=o;t.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},u=f=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Te)}}),0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new sc(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return st(t===null||typeof t=="string",2055,{h:t}),new vt(t)}}class cp{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class up{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new cp(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(vt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ra{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hp{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hd(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){st(this.o===void 0,3512);const r=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,x("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>r(o)))};const s=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ra(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(st(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Ra(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function fp(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}class gs{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=fp(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<e&&(r+=t.charAt(s[o]%62))}return r}}function G(n,t){return n<t?-1:n>t?1:0}function Wi(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const s=n.charAt(r),o=t.charAt(r);if(s!==o)return Ci(s)===Ci(o)?G(s,o):Ci(s)?1:-1}return G(n.length,t.length)}const dp=55296,pp=57343;function Ci(n){const t=n.charCodeAt(0);return t>=dp&&t<=pp}function qe(n,t,e){return n.length===t.length&&n.every(((r,s)=>e(r,t[s])))}const Sa="__name__";class Ut{constructor(t,e,r){e===void 0?e=0:e>t.length&&j(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&j(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Ut.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ut?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let s=0;s<r;s++){const o=Ut.compareSegments(t.get(s),e.get(s));if(o!==0)return o}return G(t.length,e.length)}static compareSegments(t,e){const r=Ut.isNumericId(t),s=Ut.isNumericId(e);return r&&!s?-1:!r&&s?1:r&&s?Ut.extractNumericId(t).compare(Ut.extractNumericId(e)):Wi(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return _s.fromString(t.substring(4,t.length-2))}}class rt extends Ut{construct(t,e,r){return new rt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new L(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((s=>s.length>0)))}return new rt(e)}static emptyPath(){return new rt([])}}const _p=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Ut{construct(t,e,r){return new pt(t,e,r)}static isValidIdentifier(t){return _p.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sa}static keyField(){return new pt([Sa])}static fromServerFormat(t){const e=[];let r="",s=0;const o=()=>{if(r.length===0)throw new L(P.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let a=!1;for(;s<t.length;){const u=t[s];if(u==="\\"){if(s+1===t.length)throw new L(P.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new L(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=f,s+=2}else u==="`"?(a=!a,s++):u!=="."||a?(r+=u,s++):(o(),s++)}if(o(),a)throw new L(P.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new pt(e)}static emptyPath(){return new pt([])}}class ${constructor(t){this.path=t}static fromPath(t){return new $(rt.fromString(t))}static fromName(t){return new $(rt.fromString(t).popFirst(5))}static empty(){return new $(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&rt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return rt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $(new rt(t.slice()))}}function oc(n,t,e){if(!e)throw new L(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function mp(n,t,e,r){if(t===!0&&r===!0)throw new L(P.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Ca(n){if(!$.isDocumentKey(n))throw new L(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Pa(n){if($.isDocumentKey(n))throw new L(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ac(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ys(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":j(12329,{type:typeof n})}function lc(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new L(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=ys(n);throw new L(P.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function at(n,t){const e={typeString:n};return t&&(e.value=t),e}function Bn(n,t){if(!ac(n))throw new L(P.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const s=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){e=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){e=`Expected '${r}' field to equal '${o.value}'`;break}}if(e)throw new L(P.INVALID_ARGUMENT,e);return!0}const Va=-62135596800,ka=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(t){return tt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*ka);return new tt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Va)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ka}_compareTo(t){return this.seconds===t.seconds?G(this.nanoseconds,t.nanoseconds):G(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Bn(t,tt._jsonSchema))return new tt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Va;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:at("string",tt._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new tt(0,0))}static max(){return new Z(new tt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Nn=-1;function gp(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new tt(e+1,0):new tt(e,r));return new ae(s,$.empty(),t)}function yp(n){return new ae(n.readTime,n.key,Nn)}class ae{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new ae(Z.min(),$.empty(),Nn)}static max(){return new ae(Z.max(),$.empty(),Nn)}}function vp(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=$.comparator(n.documentKey,t.documentKey),e!==0?e:G(n.largestBatchId,t.largestBatchId))}const Ep="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function vs(n){if(n.code!==P.FAILED_PRECONDITION||n.message!==Ep)throw n;x("LocalStore","Unexpectedly lost primary lease")}class C{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new C(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(e,o).next(r,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof C?e:C.resolve(e)}catch(e){return C.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):C.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):C.reject(e)}static resolve(t){return new C(((e,r)=>{e(t)}))}static reject(t){return new C(((e,r)=>{r(t)}))}static waitFor(t){return new C(((e,r)=>{let s=0,o=0,a=!1;t.forEach((u=>{++s,u.next((()=>{++o,a&&o===s&&e()}),(f=>r(f)))})),a=!0,o===s&&e()}))}static or(t){let e=C.resolve(!1);for(const r of t)e=e.next((s=>s?C.resolve(s):r()));return e}static forEach(t,e){const r=[];return t.forEach(((s,o)=>{r.push(e.call(this,s,o))})),this.waitFor(r)}static mapArray(t,e){return new C(((r,s)=>{const o=t.length,a=new Array(o);let u=0;for(let f=0;f<o;f++){const h=f;e(t[h]).next((E=>{a[h]=E,++u,u===o&&r(a)}),(E=>s(E)))}}))}static doWhile(t,e){return new C(((r,s)=>{const o=()=>{t()===!0?e().next((()=>{o()}),s):r()};o()}))}}function wp(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function jn(n){return n.name==="IndexedDbTransactionError"}class Es{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Es.ce=-1;const Ts=-1;function ws(n){return n==null}function Cr(n){return n===0&&1/n==-1/0}function Ip(n){return typeof n=="number"&&Number.isInteger(n)&&!Cr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const cc="";function Ap(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Da(t)),t=bp(n.get(e),t);return Da(t)}function bp(n,t){let e=t;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":e+="";break;case cc:e+="";break;default:e+=o}}return e}function Da(n){return n+cc+""}function Na(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Ze(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function uc(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class St{constructor(t,e){this.comparator=t,this.root=e||ft.EMPTY}insert(t,e){return new St(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(t){return new St(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ft.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return e+r.left.size;s<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fr(this.root,t,this.comparator,!1)}getReverseIterator(){return new fr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fr(this.root,t,this.comparator,!0)}}class fr{constructor(t,e,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?r(t.key,e):1,e&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ft{constructor(t,e,r,s,o){this.key=t,this.value=e,this.color=r??ft.RED,this.left=s??ft.EMPTY,this.right=o??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,s,o){return new ft(t??this.key,e??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,e,r),null):o===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw j(27949);return t+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(t,e,r,s,o){return this}insert(t,e,r){return new ft(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _t{constructor(t){this.comparator=t,this.data=new St(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new xa(this.data.getIterator())}getIteratorFrom(t){return new xa(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof _t)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new _t(this.comparator);return e.data=t,e}}class xa{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ot{constructor(t){this.fields=t,t.sort(pt.comparator)}static empty(){return new Ot([])}unionWith(t){let e=new _t(pt.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Ot(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return qe(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}class Rp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ht{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Rp("Invalid base64 string: "+o):o}})(t);return new Ht(e)}static fromUint8Array(t){const e=(function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o})(t);return new Ht(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return G(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const Sp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Re(n){if(st(!!n,39018),typeof n=="string"){let t=0;const e=Sp.exec(n);if(st(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ze(n){return typeof n=="string"?Ht.fromBase64String(n):Ht.fromUint8Array(n)}const hc="server_timestamp",fc="__type__",dc="__previous_value__",pc="__local_write_time__";function Is(n){return(n?.mapValue?.fields||{})[fc]?.stringValue===hc}function As(n){const t=n.mapValue.fields[dc];return Is(t)?As(t):t}function Pr(n){const t=Re(n.mapValue.fields[pc].timestampValue);return new tt(t.seconds,t.nanos)}class Cp{constructor(t,e,r,s,o,a,u,f,h,E){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=E}}const Vr="(default)";class kr{constructor(t,e){this.projectId=t,this.database=e||Vr}static empty(){return new kr("","")}get isDefaultDatabase(){return this.database===Vr}isEqual(t){return t instanceof kr&&t.projectId===this.projectId&&t.database===this.database}}const _c="__type__",Pp="__max__",dr={mapValue:{}},mc="__vector__",Ki="value";function Se(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Is(n)?4:kp(n)?9007199254740991:Vp(n)?10:11:j(28295,{value:n})}function qt(n,t){if(n===t)return!0;const e=Se(n);if(e!==Se(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Pr(n).isEqual(Pr(t));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Re(s.timestampValue),u=Re(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,o){return ze(s.bytesValue).isEqual(ze(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,o){return dt(s.geoPointValue.latitude)===dt(o.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(o.geoPointValue.longitude)})(n,t);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return dt(s.integerValue)===dt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=dt(s.doubleValue),u=dt(o.doubleValue);return a===u?Cr(a)===Cr(u):isNaN(a)&&isNaN(u)}return!1})(n,t);case 9:return qe(n.arrayValue.values||[],t.arrayValue.values||[],qt);case 10:case 11:return(function(s,o){const a=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Na(a)!==Na(u))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(u[f]===void 0||!qt(a[f],u[f])))return!1;return!0})(n,t);default:return j(52216,{left:n})}}function xn(n,t){return(n.values||[]).find((e=>qt(e,t)))!==void 0}function Ge(n,t){if(n===t)return 0;const e=Se(n),r=Se(t);if(e!==r)return G(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return G(n.booleanValue,t.booleanValue);case 2:return(function(o,a){const u=dt(o.integerValue||o.doubleValue),f=dt(a.integerValue||a.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(n,t);case 3:return Oa(n.timestampValue,t.timestampValue);case 4:return Oa(Pr(n),Pr(t));case 5:return Wi(n.stringValue,t.stringValue);case 6:return(function(o,a){const u=ze(o),f=ze(a);return u.compareTo(f)})(n.bytesValue,t.bytesValue);case 7:return(function(o,a){const u=o.split("/"),f=a.split("/");for(let h=0;h<u.length&&h<f.length;h++){const E=G(u[h],f[h]);if(E!==0)return E}return G(u.length,f.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,a){const u=G(dt(o.latitude),dt(a.latitude));return u!==0?u:G(dt(o.longitude),dt(a.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return Ma(n.arrayValue,t.arrayValue);case 10:return(function(o,a){const u=o.fields||{},f=a.fields||{},h=u[Ki]?.arrayValue,E=f[Ki]?.arrayValue,p=G(h?.values?.length||0,E?.values?.length||0);return p!==0?p:Ma(h,E)})(n.mapValue,t.mapValue);case 11:return(function(o,a){if(o===dr.mapValue&&a===dr.mapValue)return 0;if(o===dr.mapValue)return 1;if(a===dr.mapValue)return-1;const u=o.fields||{},f=Object.keys(u),h=a.fields||{},E=Object.keys(h);f.sort(),E.sort();for(let p=0;p<f.length&&p<E.length;++p){const I=Wi(f[p],E[p]);if(I!==0)return I;const S=Ge(u[f[p]],h[E[p]]);if(S!==0)return S}return G(f.length,E.length)})(n.mapValue,t.mapValue);default:throw j(23264,{he:e})}}function Oa(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return G(n,t);const e=Re(n),r=Re(t),s=G(e.seconds,r.seconds);return s!==0?s:G(e.nanos,r.nanos)}function Ma(n,t){const e=n.values||[],r=t.values||[];for(let s=0;s<e.length&&s<r.length;++s){const o=Ge(e[s],r[s]);if(o)return o}return G(e.length,r.length)}function We(n){return Qi(n)}function Qi(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const r=Re(e);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return ze(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return $.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let r="[",s=!0;for(const o of e.values||[])s?s=!1:r+=",",r+=Qi(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(e){const r=Object.keys(e.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${Qi(e.fields[a])}`;return s+"}"})(n.mapValue):j(61005,{value:n})}function vr(n){switch(Se(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=As(n);return t?16+vr(t):16;case 5:return 2*n.stringValue.length;case 6:return ze(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+vr(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ze(r.fields,((o,a)=>{s+=o.length+vr(a)})),s})(n.mapValue);default:throw j(13486,{value:n})}}function Xi(n){return!!n&&"integerValue"in n}function bs(n){return!!n&&"arrayValue"in n}function Er(n){return!!n&&"mapValue"in n}function Vp(n){return(n?.mapValue?.fields||{})[_c]?.stringValue===mc}function An(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Ze(n.mapValue.fields,((e,r)=>t.mapValue.fields[e]=An(r))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=An(n.arrayValue.values[e]);return t}return{...n}}function kp(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Pp}class Dt{constructor(t){this.value=t}static empty(){return new Dt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Er(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=An(e)}setAll(t){let e=pt.emptyPath(),r={},s=[];t.forEach(((a,u)=>{if(!e.isImmediateParentOf(u)){const f=this.getFieldsMap(e);this.applyChanges(f,r,s),r={},s=[],e=u.popLast()}a?r[u.lastSegment()]=An(a):s.push(u.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,r,s)}delete(t){const e=this.field(t.popLast());Er(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qt(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=e.mapValue.fields[t.get(r)];Er(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,r){Ze(e,((s,o)=>t[s]=o));for(const s of r)delete t[s]}clone(){return new Dt(An(this.value))}}function gc(n){const t=[];return Ze(n.fields,((e,r)=>{const s=new pt([e]);if(Er(r)){const o=gc(r.mapValue).fields;if(o.length===0)t.push(s);else for(const a of o)t.push(s.child(a))}else t.push(s)})),new Ot(t)}class kt{constructor(t,e,r,s,o,a,u){this.key=t,this.documentType=e,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(t){return new kt(t,0,Z.min(),Z.min(),Z.min(),Dt.empty(),0)}static newFoundDocument(t,e,r,s){return new kt(t,1,e,Z.min(),r,s,0)}static newNoDocument(t,e){return new kt(t,2,e,Z.min(),Z.min(),Dt.empty(),0)}static newUnknownDocument(t,e){return new kt(t,3,e,Z.min(),Z.min(),Dt.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof kt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dr{constructor(t,e){this.position=t,this.inclusive=e}}function La(n,t,e){let r=0;for(let s=0;s<n.position.length;s++){const o=t[s],a=n.position[s];if(o.field.isKeyField()?r=$.comparator($.fromName(a.referenceValue),e.key):r=Ge(a,e.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fa(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!qt(n.position[e],t.position[e]))return!1;return!0}class Nr{constructor(t,e="asc"){this.field=t,this.dir=e}}function Dp(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class yc{}class ht extends yc{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new xp(t,e,r):e==="array-contains"?new Lp(t,r):e==="in"?new Fp(t,r):e==="not-in"?new Up(t,r):e==="array-contains-any"?new $p(t,r):new ht(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new Op(t,r):new Mp(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Ge(e,this.value)):e!==null&&Se(this.value)===Se(e)&&this.matchesComparison(Ge(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class le extends yc{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new le(t,e)}matches(t){return vc(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vc(n){return n.op==="and"}function Ec(n){return Np(n)&&vc(n)}function Np(n){for(const t of n.filters)if(t instanceof le)return!1;return!0}function Ji(n){if(n instanceof ht)return n.field.canonicalString()+n.op.toString()+We(n.value);if(Ec(n))return n.filters.map((t=>Ji(t))).join(",");{const t=n.filters.map((e=>Ji(e))).join(",");return`${n.op}(${t})`}}function Tc(n,t){return n instanceof ht?(function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&qt(r.value,s.value)})(n,t):n instanceof le?(function(r,s){return s instanceof le&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,a,u)=>o&&Tc(a,s.filters[u])),!0):!1})(n,t):void j(19439)}function wc(n){return n instanceof ht?(function(e){return`${e.field.canonicalString()} ${e.op} ${We(e.value)}`})(n):n instanceof le?(function(e){return e.op.toString()+" {"+e.getFilters().map(wc).join(" ,")+"}"})(n):"Filter"}class xp extends ht{constructor(t,e,r){super(t,e,r),this.key=$.fromName(r.referenceValue)}matches(t){const e=$.comparator(t.key,this.key);return this.matchesComparison(e)}}class Op extends ht{constructor(t,e){super(t,"in",e),this.keys=Ic("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Mp extends ht{constructor(t,e){super(t,"not-in",e),this.keys=Ic("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Ic(n,t){return(t.arrayValue?.values||[]).map((e=>$.fromName(e.referenceValue)))}class Lp extends ht{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return bs(e)&&xn(e.arrayValue,this.value)}}class Fp extends ht{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&xn(this.value.arrayValue,e)}}class Up extends ht{constructor(t,e){super(t,"not-in",e)}matches(t){if(xn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!xn(this.value.arrayValue,e)}}class $p extends ht{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!bs(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>xn(this.value.arrayValue,r)))}}class Bp{constructor(t,e=null,r=[],s=[],o=null,a=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Ua(n,t=null,e=[],r=[],s=null,o=null,a=null){return new Bp(n,t,e,r,s,o,a)}function Rs(n){const t=Q(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Ji(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),ws(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>We(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>We(r))).join(",")),t.Te=e}return t.Te}function Ss(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Dp(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Tc(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Fa(n.startAt,t.startAt)&&Fa(n.endAt,t.endAt)}class Hr{constructor(t,e=null,r=[],s=[],o=null,a="F",u=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jp(n,t,e,r,s,o,a,u){return new Hr(n,t,e,r,s,o,a,u)}function Hp(n){return new Hr(n)}function $a(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qp(n){return n.collectionGroup!==null}function bn(n){const t=Q(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new _t(pt.comparator);return a.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new Nr(o,r))})),e.has(pt.keyField().canonicalString())||t.Ie.push(new Nr(pt.keyField(),r))}return t.Ie}function we(n){const t=Q(n);return t.Ee||(t.Ee=zp(t,bn(n))),t.Ee}function zp(n,t){if(n.limitType==="F")return Ua(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Nr(s.field,o)}));const e=n.endAt?new Dr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Dr(n.startAt.position,n.startAt.inclusive):null;return Ua(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Yi(n,t,e){return new Hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Ac(n,t){return Ss(we(n),we(t))&&n.limitType===t.limitType}function bc(n){return`${Rs(we(n))}|lt:${n.limitType}`}function gn(n){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((s=>wc(s))).join(", ")}]`),ws(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((s=>We(s))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((s=>We(s))).join(",")),`Target(${r})`})(we(n))}; limitType=${n.limitType})`}function Cs(n,t){return t.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,t)&&(function(r,s){for(const o of bn(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,t)&&(function(r,s){return!(r.startAt&&!(function(a,u,f){const h=La(a,u,f);return a.inclusive?h<=0:h<0})(r.startAt,bn(r),s)||r.endAt&&!(function(a,u,f){const h=La(a,u,f);return a.inclusive?h>=0:h>0})(r.endAt,bn(r),s))})(n,t)}function Gp(n){return(t,e)=>{let r=!1;for(const s of bn(n)){const o=Wp(s,t,e);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Wp(n,t,e){const r=n.field.isKeyField()?$.comparator(t.key,e.key):(function(o,a,u){const f=a.data.field(o),h=u.data.field(o);return f!==null&&h!==null?Ge(f,h):j(42886)})(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:n.dir})}}class Pe{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[e]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ze(this.inner,((e,r)=>{for(const[s,o]of r)t(s,o)}))}isEmpty(){return uc(this.inner)}size(){return this.innerSize}}const Kp=new St($.comparator);function xr(){return Kp}const Rc=new St($.comparator);function pr(...n){let t=Rc;for(const e of n)t=t.insert(e.key,e);return t}function Sc(n){let t=Rc;return n.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Ee(){return Rn()}function Cc(){return Rn()}function Rn(){return new Pe((n=>n.toString()),((n,t)=>n.isEqual(t)))}const Qp=new St($.comparator),Xp=new _t($.comparator);function Et(...n){let t=Xp;for(const e of n)t=t.add(e);return t}const Jp=new _t(G);function Yp(){return Jp}function Ps(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cr(t)?"-0":t}}function Pc(n){return{integerValue:""+n}}function Zp(n,t){return Ip(t)?Pc(t):Ps(n,t)}class qr{constructor(){this._=void 0}}function t_(n,t,e){return n instanceof Or?(function(s,o){const a={fields:{[fc]:{stringValue:hc},[pc]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Is(o)&&(o=As(o)),o&&(a.fields[dc]=o),{mapValue:a}})(e,t):n instanceof On?kc(n,t):n instanceof Mn?Dc(n,t):(function(s,o){const a=Vc(s,o),u=Ba(a)+Ba(s.Ae);return Xi(a)&&Xi(s.Ae)?Pc(u):Ps(s.serializer,u)})(n,t)}function e_(n,t,e){return n instanceof On?kc(n,t):n instanceof Mn?Dc(n,t):e}function Vc(n,t){return n instanceof Mr?(function(r){return Xi(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(t)?t:{integerValue:0}:null}class Or extends qr{}class On extends qr{constructor(t){super(),this.elements=t}}function kc(n,t){const e=Nc(t);for(const r of n.elements)e.some((s=>qt(s,r)))||e.push(r);return{arrayValue:{values:e}}}class Mn extends qr{constructor(t){super(),this.elements=t}}function Dc(n,t){let e=Nc(t);for(const r of n.elements)e=e.filter((s=>!qt(s,r)));return{arrayValue:{values:e}}}class Mr extends qr{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Ba(n){return dt(n.integerValue||n.doubleValue)}function Nc(n){return bs(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function n_(n,t){return n.field.isEqual(t.field)&&(function(r,s){return r instanceof On&&s instanceof On||r instanceof Mn&&s instanceof Mn?qe(r.elements,s.elements,qt):r instanceof Mr&&s instanceof Mr?qt(r.Ae,s.Ae):r instanceof Or&&s instanceof Or})(n.transform,t.transform)}class r_{constructor(t,e){this.version=t,this.transformResults=e}}class Gt{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Gt}static exists(t){return new Gt(void 0,t)}static updateTime(t){return new Gt(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Tr(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class zr{}function xc(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Mc(n.key,Gt.none()):new Hn(n.key,n.data,Gt.none());{const e=n.data,r=Dt.empty();let s=new _t(pt.comparator);for(let o of t.fields)if(!s.has(o)){let a=e.field(o);a===null&&o.length>1&&(o=o.popLast(),a=e.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Ve(n.key,r,new Ot(s.toArray()),Gt.none())}}function i_(n,t,e){n instanceof Hn?(function(s,o,a){const u=s.value.clone(),f=Ha(s.fieldTransforms,o,a.transformResults);u.setAll(f),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,t,e):n instanceof Ve?(function(s,o,a){if(!Tr(s.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Ha(s.fieldTransforms,o,a.transformResults),f=o.data;f.setAll(Oc(s)),f.setAll(u),o.convertToFoundDocument(a.version,f).setHasCommittedMutations()})(n,t,e):(function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,e)}function Sn(n,t,e,r){return n instanceof Hn?(function(o,a,u,f){if(!Tr(o.precondition,a))return u;const h=o.value.clone(),E=qa(o.fieldTransforms,f,a);return h.setAll(E),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,t,e,r):n instanceof Ve?(function(o,a,u,f){if(!Tr(o.precondition,a))return u;const h=qa(o.fieldTransforms,f,a),E=a.data;return E.setAll(Oc(o)),E.setAll(h),a.convertToFoundDocument(a.version,E).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((p=>p.field)))})(n,t,e,r):(function(o,a,u){return Tr(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,t,e)}function s_(n,t){let e=null;for(const r of n.fieldTransforms){const s=t.data.field(r.field),o=Vc(r.transform,s||null);o!=null&&(e===null&&(e=Dt.empty()),e.set(r.field,o))}return e||null}function ja(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qe(r,s,((o,a)=>n_(o,a)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Hn extends zr{constructor(t,e,r,s=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ve extends zr{constructor(t,e,r,s,o=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Oc(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}})),t}function Ha(n,t,e){const r=new Map;st(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let s=0;s<e.length;s++){const o=n[s],a=o.transform,u=t.data.field(o.field);r.set(o.field,e_(a,u,e[s]))}return r}function qa(n,t,e){const r=new Map;for(const s of n){const o=s.transform,a=e.data.field(s.field);r.set(s.field,t_(o,a,t))}return r}class Mc extends zr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o_ extends zr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class a_{constructor(t,e,r,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&i_(o,t,r[s])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Sn(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Sn(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=Cc();return this.mutations.forEach((s=>{const o=t.get(s.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=e.has(s.key)?null:u;const f=xc(a,u);f!==null&&r.set(s.key,f),a.isValidDocument()||a.convertToNoDocument(Z.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Et())}isEqual(t){return this.batchId===t.batchId&&qe(this.mutations,t.mutations,((e,r)=>ja(e,r)))&&qe(this.baseMutations,t.baseMutations,((e,r)=>ja(e,r)))}}class Vs{constructor(t,e,r,s){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=s}static from(t,e,r){st(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return Qp})();const o=t.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new Vs(t,e,r,s)}}class l_{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}var ot,H;function c_(n){switch(n){case P.OK:return j(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return j(15467,{code:n})}}function u_(n){if(n===void 0)return be("GRPC error has no .code"),P.UNKNOWN;switch(n){case ot.OK:return P.OK;case ot.CANCELLED:return P.CANCELLED;case ot.UNKNOWN:return P.UNKNOWN;case ot.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case ot.INTERNAL:return P.INTERNAL;case ot.UNAVAILABLE:return P.UNAVAILABLE;case ot.UNAUTHENTICATED:return P.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case ot.NOT_FOUND:return P.NOT_FOUND;case ot.ALREADY_EXISTS:return P.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return P.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case ot.ABORTED:return P.ABORTED;case ot.OUT_OF_RANGE:return P.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return P.UNIMPLEMENTED;case ot.DATA_LOSS:return P.DATA_LOSS;default:return j(39323,{code:n})}}(H=ot||(ot={}))[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS";new _s([4294967295,4294967295],0);class h_{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Zi(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function f_(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function d_(n,t){return Zi(n,t.toTimestamp())}function Ue(n){return st(!!n,49232),Z.fromTimestamp((function(e){const r=Re(e);return new tt(r.seconds,r.nanos)})(n))}function Lc(n,t){return ts(n,t).canonicalString()}function ts(n,t){const e=(function(s){return new rt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function p_(n){const t=rt.fromString(n);return st(w_(t),10190,{key:t.toString()}),t}function es(n,t){return Lc(n.databaseId,t.path)}function __(n){const t=p_(n);return t.length===4?rt.emptyPath():g_(t)}function m_(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function g_(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function za(n,t,e){return{name:es(n,t),fields:e.value.mapValue.fields}}function y_(n,t){let e;if(t instanceof Hn)e={update:za(n,t.key,t.value)};else if(t instanceof Mc)e={delete:es(n,t.key)};else if(t instanceof Ve)e={update:za(n,t.key,t.data),updateMask:T_(t.fieldMask)};else{if(!(t instanceof o_))return j(16599,{Vt:t.type});e={verify:es(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(o,a){const u=a.transform;if(u instanceof Or)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof On)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Mn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Mr)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw j(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:d_(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j(27497)})(n,t.precondition)),e}function v_(n,t){return n&&n.length>0?(st(t!==void 0,14353),n.map((e=>(function(s,o){let a=s.updateTime?Ue(s.updateTime):Ue(o);return a.isEqual(Z.min())&&(a=Ue(o)),new r_(a,s.transformResults||[])})(e,t)))):[]}function E_(n){let t=__(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let s=null;if(r>0){st(r===1,65062);const E=e.from[0];E.allDescendants?s=E.collectionId:t=t.child(E.collectionId)}let o=[];e.where&&(o=(function(p){const I=Fc(p);return I instanceof le&&Ec(I)?I.getFilters():[I]})(e.where));let a=[];e.orderBy&&(a=(function(p){return p.map((I=>(function(k){return new Nr(Le(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(I)))})(e.orderBy));let u=null;e.limit&&(u=(function(p){let I;return I=typeof p=="object"?p.value:p,ws(I)?null:I})(e.limit));let f=null;e.startAt&&(f=(function(p){const I=!!p.before,S=p.values||[];return new Dr(S,I)})(e.startAt));let h=null;return e.endAt&&(h=(function(p){const I=!p.before,S=p.values||[];return new Dr(S,I)})(e.endAt)),jp(t,s,a,o,u,"F",f,h)}function Fc(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Le(e.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Le(e.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Le(e.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Le(e.unaryFilter.field);return ht.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}})(n):n.fieldFilter!==void 0?(function(e){return ht.create(Le(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return le.create(e.compositeFilter.filters.map((r=>Fc(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return j(1026)}})(e.compositeFilter.op))})(n):j(30097,{filter:n})}function Le(n){return pt.fromServerFormat(n.fieldPath)}function T_(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function w_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class I_{constructor(t){this.yt=t}}function A_(n){const t=E_({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yi(t,t.limit,"L"):t}class b_{constructor(){this.Cn=new R_}addToCollectionParentIndex(t,e){return this.Cn.add(e),C.resolve()}getCollectionParents(t,e){return C.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return C.resolve()}deleteFieldIndex(t,e){return C.resolve()}deleteAllFieldIndexes(t){return C.resolve()}createTargetIndexes(t,e){return C.resolve()}getDocumentsMatchingTarget(t,e){return C.resolve(null)}getIndexType(t,e){return C.resolve(0)}getFieldIndexes(t,e){return C.resolve([])}getNextCollectionGroupToUpdate(t){return C.resolve(null)}getMinOffset(t,e){return C.resolve(ae.min())}getMinOffsetFromCollectionGroup(t,e){return C.resolve(ae.min())}updateCollectionGroup(t,e,r){return C.resolve()}updateIndexEntries(t,e){return C.resolve()}}class R_{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),s=this.index[e]||new _t(rt.comparator),o=!s.has(r);return this.index[e]=s.add(r),o}has(t){const e=t.lastSegment(),r=t.popLast(),s=this.index[e];return s&&s.has(r)}getEntries(t){return(this.index[t]||new _t(rt.comparator)).toArray()}}const Ga={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uc=41943040;class Rt{static withCacheSize(t){return new Rt(t,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(Uc,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);class Ke{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ke(0)}static cr(){return new Ke(-1)}}const Wa="LruGarbageCollector",S_=1048576;function Ka([n,t],[e,r]){const s=G(n,e);return s===0?G(t,r):s}class C_{constructor(t){this.Ir=t,this.buffer=new _t(Ka),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();Ka(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class P_{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){x(Wa,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){jn(e)?x(Wa,"Ignoring IndexedDB error during garbage collection: ",e):await vs(e)}await this.Vr(3e5)}))}}class V_{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return C.resolve(Es.ce);const r=new C_(e);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),C.resolve(Ga)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ga):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,s,o,a,u,f,h;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s)))).next((p=>(r=p,u=Date.now(),this.removeTargets(t,r,e)))).next((p=>(o=p,f=Date.now(),this.removeOrphanedDocuments(t,r)))).next((p=>(h=Date.now(),Me()<=q.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-E}ms
	Determined least recently used ${s} in `+(u-a)+`ms
	Removed ${o} targets in `+(f-u)+`ms
	Removed ${p} documents in `+(h-f)+`ms
Total Duration: ${h-E}ms`),C.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:p}))))}}function k_(n,t){return new V_(n,t)}class D_{constructor(){this.changes=new Pe((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,kt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?C.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class N_{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class x_{constructor(t,e,r,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(r!==null&&Sn(r.mutation,s,Ot.empty(),tt.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,Et()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=Et()){const s=Ee();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,r).next((o=>{let a=pr();return o.forEach(((u,f)=>{a=a.insert(u,f.overlayedDocument)})),a}))))}getOverlayedDocuments(t,e){const r=Ee();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,Et())))}populateOverlays(t,e,r){const s=[];return r.forEach((o=>{e.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(t,s).next((o=>{o.forEach(((a,u)=>{e.set(a,u)}))}))}computeViews(t,e,r,s){let o=xr();const a=Rn(),u=(function(){return Rn()})();return e.forEach(((f,h)=>{const E=r.get(h.key);s.has(h.key)&&(E===void 0||E.mutation instanceof Ve)?o=o.insert(h.key,h):E!==void 0?(a.set(h.key,E.mutation.getFieldMask()),Sn(E.mutation,h,E.mutation.getFieldMask(),tt.now())):a.set(h.key,Ot.empty())})),this.recalculateAndSaveOverlays(t,o).next((f=>(f.forEach(((h,E)=>a.set(h,E))),e.forEach(((h,E)=>u.set(h,new N_(E,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(t,e){const r=Rn();let s=new St(((a,u)=>a-u)),o=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((a=>{for(const u of a)u.keys().forEach((f=>{const h=e.get(f);if(h===null)return;let E=r.get(f)||Ot.empty();E=u.applyToLocalView(h,E),r.set(f,E);const p=(s.get(u.batchId)||Et()).add(f);s=s.insert(u.batchId,p)}))})).next((()=>{const a=[],u=s.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),h=f.key,E=f.value,p=Cc();E.forEach((I=>{if(!o.has(I)){const S=xc(e.get(I),r.get(I));S!==null&&p.set(I,S),o=o.add(I)}})),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return C.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,s){return(function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):qp(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,s):this.getDocumentsMatchingCollectionQuery(t,e,r,s)}getNextDocuments(t,e,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,s).next((o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,s-o.size):C.resolve(Ee());let u=Nn,f=o;return a.next((h=>C.forEach(h,((E,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),o.get(E)?C.resolve():this.remoteDocumentCache.getEntry(t,E).next((I=>{f=f.insert(E,I)}))))).next((()=>this.populateOverlays(t,h,o))).next((()=>this.computeViews(t,f,h,Et()))).next((E=>({batchId:u,changes:Sc(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new $(e)).next((r=>{let s=pr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,s){const o=e.collectionGroup;let a=pr();return this.indexManager.getCollectionParents(t,o).next((u=>C.forEach(u,(f=>{const h=(function(p,I){return new Hr(I,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,h,r,s).next((E=>{E.forEach(((p,I)=>{a=a.insert(p,I)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,e,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,o,s)))).next((a=>{o.forEach(((f,h)=>{const E=h.getKey();a.get(E)===null&&(a=a.insert(E,kt.newInvalidDocument(E)))}));let u=pr();return a.forEach(((f,h)=>{const E=o.get(f);E!==void 0&&Sn(E.mutation,h,Ot.empty(),tt.now()),Cs(e,h)&&(u=u.insert(f,h))})),u}))}}class O_{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return C.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Ue(s.createTime)}})(e)),C.resolve()}getNamedQuery(t,e){return C.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(s){return{name:s.name,query:A_(s.bundledQuery),readTime:Ue(s.readTime)}})(e)),C.resolve()}}class M_{constructor(){this.overlays=new St($.comparator),this.qr=new Map}getOverlay(t,e){return C.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ee();return C.forEach(e,(s=>this.getOverlay(t,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((s,o)=>{this.St(t,e,o)})),C.resolve()}removeOverlaysForBatchId(t,e,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),C.resolve()}getOverlaysForCollection(t,e,r){const s=Ee(),o=e.length+1,a=new $(e.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const f=u.getNext().value,h=f.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return C.resolve(s)}getOverlaysForCollectionGroup(t,e,r,s){let o=new St(((h,E)=>h-E));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>r){let E=o.get(h.largestBatchId);E===null&&(E=Ee(),o=o.insert(h.largestBatchId,E)),E.set(h.getKey(),h)}}const u=Ee(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,E)=>u.set(h,E))),!(u.size()>=s)););return C.resolve(u)}St(t,e,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new l_(e,r));let o=this.qr.get(e);o===void 0&&(o=Et(),this.qr.set(e,o)),this.qr.set(e,o.add(r.key))}}class L_{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(t){return C.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,C.resolve()}}class ks{constructor(){this.Qr=new _t(ut.$r),this.Ur=new _t(ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new ut(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new ut(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new $(new rt([])),r=new ut(e,t),s=new ut(e,t+1),o=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),o.push(a.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new $(new rt([])),r=new ut(e,t),s=new ut(e,t+1);let o=Et();return this.Ur.forEachInRange([r,s],(a=>{o=o.add(a.key)})),o}containsKey(t){const e=new ut(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class ut{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return $.comparator(t.key,e.key)||G(t.Yr,e.Yr)}static Kr(t,e){return G(t.Yr,e.Yr)||$.comparator(t.key,e.key)}}class F_{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new _t(ut.$r)}checkEmpty(t){return C.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new a_(o,e,r,s);this.mutationQueue.push(a);for(const u of s)this.Zr=this.Zr.add(new ut(u.key,o)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return C.resolve(a)}lookupMutationBatch(t,e){return C.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,s=this.ei(r),o=s<0?0:s;return C.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this.mutationQueue.length===0?Ts:this.tr-1)}getAllMutationBatches(t){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new ut(e,0),s=new ut(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(a=>{const u=this.Xr(a.Yr);o.push(u)})),C.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new _t(G);return e.forEach((s=>{const o=new ut(s,0),a=new ut(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],(u=>{r=r.add(u.Yr)}))})),C.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,s=r.length+1;let o=r;$.isDocumentKey(o)||(o=o.child(""));const a=new ut(new $(o),0);let u=new _t(G);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(f.Yr)),!0)}),a),C.resolve(this.ti(u))}ti(t){const e=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){st(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return C.forEach(e.mutations,(s=>{const o=new ut(s.key,e.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new ut(e,0),s=this.Zr.firstAfterOrEqual(r);return C.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,C.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class U_{constructor(t){this.ri=t,this.docs=(function(){return new St($.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,s=this.docs.get(r),o=s?s.size:0,a=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return C.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(e))}getEntries(t,e){let r=xr();return e.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():kt.newInvalidDocument(s))})),C.resolve(r)}getDocumentsMatchingQuery(t,e,r,s){let o=xr();const a=e.path,u=new $(a.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:h,value:{document:E}}=f.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||vp(yp(E),r)<=0||(s.has(E.key)||Cs(e,E))&&(o=o.insert(E.key,E.mutableCopy()))}return C.resolve(o)}getAllFromCollectionGroup(t,e,r,s){j(9500)}ii(t,e){return C.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new $_(this)}getSize(t){return C.resolve(this.size)}}class $_ extends D_{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),C.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class B_{constructor(t){this.persistence=t,this.si=new Pe((e=>Rs(e)),Ss),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new ks,this.targetCount=0,this.ai=Ke.ur()}forEachTarget(t,e){return this.si.forEach(((r,s)=>e(s))),C.resolve()}getLastRemoteSnapshotVersion(t){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return C.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),C.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ke(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,C.resolve()}updateTargetData(t,e){return this.Pr(e),C.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,C.resolve()}removeTargets(t,e,r){let s=0;const o=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=e&&r.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(t,u.targetId)),s++)})),C.waitFor(o).next((()=>s))}getTargetCount(t){return C.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return C.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),C.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const s=this.persistence.referenceDelegate,o=[];return s&&e.forEach((a=>{o.push(s.markPotentiallyOrphaned(t,a))})),C.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),C.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return C.resolve(r)}containsKey(t,e){return C.resolve(this._i.containsKey(e))}}class $c{constructor(t,e){this.ui={},this.overlays={},this.ci=new Es(0),this.li=!1,this.li=!0,this.hi=new L_,this.referenceDelegate=t(this),this.Pi=new B_(this),this.indexManager=new b_,this.remoteDocumentCache=(function(s){return new U_(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new I_(e),this.Ii=new O_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new M_,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new F_(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){x("MemoryPersistence","Starting transaction:",t);const s=new j_(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(t,e){return C.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class j_ extends Tp{constructor(t){super(),this.currentSequenceNumber=t}}class Ds{constructor(t){this.persistence=t,this.Ri=new ks,this.Vi=null}static mi(t){return new Ds(t)}get fi(){if(this.Vi)return this.Vi;throw j(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),C.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),C.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),C.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.fi,(r=>{const s=$.fromPath(r);return this.gi(t,s).next((o=>{o||e.removeEntry(s,Z.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return C.or([()=>C.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Lr{constructor(t,e){this.persistence=t,this.pi=new Pe((r=>Ap(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=k_(this,e)}static mi(t,e){return new Lr(t,e)}Ei(){}di(t){return C.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((s=>r+s))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return C.forEach(this.pi,((r,s)=>this.br(t,r,s).next((o=>o?C.resolve():e(s)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,e).next((u=>{u||(r++,o.removeEntry(a,Z.min()))})))).next((()=>o.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),C.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),C.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),C.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),C.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=vr(t.data.value)),e}br(t,e,r){return C.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.pi.get(e);return C.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Ns{constructor(t,e,r,s){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=s}static As(t,e){let r=Et(),s=Et();for(const o of e.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Ns(t,e.fromCache,r,s)}}class H_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class q_{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $f()?8:wp(Ff())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,s){const o={result:null};return this.ys(t,e).next((a=>{o.result=a})).next((()=>{if(!o.result)return this.ws(t,e,s,r).next((a=>{o.result=a}))})).next((()=>{if(o.result)return;const a=new H_;return this.Ss(t,e,a).next((u=>{if(o.result=u,this.Vs)return this.bs(t,e,a,u.size)}))})).next((()=>o.result))}bs(t,e,r,s){return r.documentReadCount<this.fs?(Me()<=q.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",gn(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),C.resolve()):(Me()<=q.DEBUG&&x("QueryEngine","Query:",gn(e),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Me()<=q.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",gn(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,we(e))):C.resolve())}ys(t,e){if($a(e))return C.resolve(null);let r=we(e);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=Yi(e,null,"F"),r=we(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((o=>{const a=Et(...o);return this.ps.getDocuments(t,a).next((u=>this.indexManager.getMinOffset(t,r).next((f=>{const h=this.Ds(e,u);return this.Cs(e,h,a,f.readTime)?this.ys(t,Yi(e,null,"F")):this.vs(t,h,e,f)}))))})))))}ws(t,e,r,s){return $a(e)||s.isEqual(Z.min())?C.resolve(null):this.ps.getDocuments(t,r).next((o=>{const a=this.Ds(e,o);return this.Cs(e,a,r,s)?C.resolve(null):(Me()<=q.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gn(e)),this.vs(t,a,e,gp(s,Nn)).next((u=>u)))}))}Ds(t,e){let r=new _t(Gp(t));return e.forEach(((s,o)=>{Cs(t,o)&&(r=r.add(o))})),r}Cs(t,e,r,s){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(t,e,r){return Me()<=q.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",gn(e)),this.ps.getDocumentsMatchingQuery(t,e,ae.min(),r)}vs(t,e,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((o=>(e.forEach((a=>{o=o.insert(a.key,a)})),o)))}}const z_="LocalStore";class G_{constructor(t,e,r,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new St(G),this.xs=new Pe((o=>Rs(o)),Ss),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new x_(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function W_(n,t,e,r){return new G_(n,t,e,r)}async function Bc(n,t){const e=Q(n);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return e.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((o=>{const a=[],u=[];let f=Et();for(const h of s){a.push(h.batchId);for(const E of h.mutations)f=f.add(E.key)}for(const h of o){u.push(h.batchId);for(const E of h.mutations)f=f.add(E.key)}return e.localDocuments.getDocuments(r,f).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function K_(n,t){const e=Q(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,h,E){const p=h.batch,I=p.keys();let S=C.resolve();return I.forEach((k=>{S=S.next((()=>E.getEntry(f,k))).next((O=>{const D=h.docVersions.get(k);st(D!==null,48541),O.version.compareTo(D)<0&&(p.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),E.addEntry(O)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(f,p)))})(e,r,t,o).next((()=>o.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let f=Et();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(f=f.add(u.batch.mutations[h].key));return f})(t)))).next((()=>e.localDocuments.getDocuments(r,s)))}))}function Q_(n){const t=Q(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function X_(n,t){const e=Q(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Ts),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}class Qa{constructor(){this.activeTargetIds=Yp()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class J_{constructor(){this.Mo=new Qa,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Qa,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Y_{Oo(t){}shutdown(){}}const Xa="ConnectivityMonitor";class Ja{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){x(Xa,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){x(Xa,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let _r=null;function ns(){return _r===null?_r=(function(){return 268435456+Math.round(2147483648*Math.random())})():_r++,"0x"+_r.toString(16)}const Pi="RestConnection",Z_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tm{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Vr?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,e,r,s,o){const a=ns(),u=this.zo(t,e.toUriEncodedString());x(Pi,`Sending RPC '${t}' ${a}:`,u,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,o);const{host:h}=new URL(u),E=ds(h);return this.Jo(t,u,f,r,E).then((p=>(x(Pi,`Received RPC '${t}' ${a}: `,p),p)),(p=>{throw jr(Pi,`RPC '${t}' ${a} failed with error: `,p,"url: ",u,"request:",r),p}))}Ho(t,e,r,s,o,a){return this.Go(t,e,r,s,o)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ye})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,o)=>t[o]=s)),r&&r.headers.forEach(((s,o)=>t[o]=s))}zo(t,e){const r=Z_[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}class em{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const gt="WebChannelConnection";class nm extends tm{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,s,o){const a=ns();return new Promise(((u,f)=>{const h=new Zl;h.setWithCredentials(!0),h.listenOnce(tc.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case yr.NO_ERROR:const p=h.getResponseJson();x(gt,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),u(p);break;case yr.TIMEOUT:x(gt,`RPC '${t}' ${a} timed out`),f(new L(P.DEADLINE_EXCEEDED,"Request time out"));break;case yr.HTTP_ERROR:const I=h.getStatus();if(x(gt,`RPC '${t}' ${a} failed with status:`,I,"response text:",h.getResponseText()),I>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const k=S?.error;if(k&&k.status&&k.message){const O=(function(M){const N=M.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(N)>=0?N:P.UNKNOWN})(k.status);f(new L(O,k.message))}else f(new L(P.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new L(P.UNAVAILABLE,"Connection failed."));break;default:j(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{x(gt,`RPC '${t}' ${a} completed.`)}}));const E=JSON.stringify(s);x(gt,`RPC '${t}' ${a} sending request:`,s),h.send(e,"POST",E,r,15)}))}T_(t,e,r){const s=ns(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=rc(),u=nc(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,r),f.encodeInitMessageHeaders=!0;const E=o.join("");x(gt,`Creating RPC '${t}' stream ${s}: ${E}`,f);const p=a.createWebChannel(E,f);this.I_(p);let I=!1,S=!1;const k=new em({Yo:D=>{S?x(gt,`Not sending because RPC '${t}' stream ${s} is closed:`,D):(I||(x(gt,`Opening RPC '${t}' stream ${s} transport.`),p.open(),I=!0),x(gt,`RPC '${t}' stream ${s} sending:`,D),p.send(D))},Zo:()=>p.close()}),O=(D,M,N)=>{D.listen(M,(F=>{try{N(F)}catch(z){setTimeout((()=>{throw z}),0)}}))};return O(p,En.EventType.OPEN,(()=>{S||(x(gt,`RPC '${t}' stream ${s} transport opened.`),k.o_())})),O(p,En.EventType.CLOSE,(()=>{S||(S=!0,x(gt,`RPC '${t}' stream ${s} transport closed`),k.a_(),this.E_(p))})),O(p,En.EventType.ERROR,(D=>{S||(S=!0,jr(gt,`RPC '${t}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),k.a_(new L(P.UNAVAILABLE,"The operation could not be completed")))})),O(p,En.EventType.MESSAGE,(D=>{if(!S){const M=D.data[0];st(!!M,16349);const N=M,F=N?.error||N[0]?.error;if(F){x(gt,`RPC '${t}' stream ${s} received error:`,F);const z=F.status;let et=(function(g){const m=ot[g];if(m!==void 0)return u_(m)})(z),W=F.message;et===void 0&&(et=P.INTERNAL,W="Unknown error status: "+z+" with message "+F.message),S=!0,k.a_(new L(et,W)),p.close()}else x(gt,`RPC '${t}' stream ${s} received:`,M),k.u_(M)}})),O(u,ec.STAT_EVENT,(D=>{D.stat===Gi.PROXY?x(gt,`RPC '${t}' stream ${s} detected buffering proxy`):D.stat===Gi.NOPROXY&&x(gt,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function Vi(){return typeof document<"u"?document:null}function Gr(n){return new h_(n,!0)}class jc{constructor(t,e,r=1e3,s=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-r);s>0&&x("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ya="PersistentStream";class rm{constructor(t,e,r,s,o,a,u,f){this.Mi=t,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jc(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===P.RESOURCE_EXHAUSTED?(be(e.toString()),be("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===e&&this.G_(r,s)}),(r=>{t((()=>{const s=new L(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return x(Ya,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(x(Ya,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class im extends rm{constructor(t,e,r,s,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,s,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return st(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,st(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){st(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=v_(t.writeResults,t.commitTime),r=Ue(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=m_(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>y_(this.serializer,r)))};this.q_(e)}}class sm{}class om extends sm{constructor(t,e,r,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Go(t,ts(e,r),s,o,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(P.UNKNOWN,o.toString())}))}Ho(t,e,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(t,ts(e,r),s,a,u,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new L(P.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class am{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(be(e),this.aa=!1):x("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qn="RemoteStore";class lm{constructor(t,e,r,s,o){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Gn(this)&&(x(qn,"Restarting streams for network reachability change."),await(async function(f){const h=Q(f);h.Ea.add(4),await zn(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Wr(h)})(this))}))})),this.Ra=new am(r,s)}}async function Wr(n){if(Gn(n))for(const t of n.da)await t(!0)}async function zn(n){for(const t of n.da)await t(!1)}function Gn(n){return Q(n).Ea.size===0}async function Hc(n,t,e){if(!jn(t))throw t;n.Ea.add(1),await zn(n),n.Ra.set("Offline"),e||(e=()=>Q_(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{x(qn,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Wr(n)}))}function qc(n,t){return t().catch((e=>Hc(n,e,t)))}async function Kr(n){const t=Q(n),e=ce(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ts;for(;cm(t);)try{const s=await X_(t.localStore,r);if(s===null){t.Ta.length===0&&e.L_();break}r=s.batchId,um(t,s)}catch(s){await Hc(t,s)}zc(t)&&Gc(t)}function cm(n){return Gn(n)&&n.Ta.length<10}function um(n,t){n.Ta.push(t);const e=ce(n);e.O_()&&e.X_&&e.ea(t.mutations)}function zc(n){return Gn(n)&&!ce(n).x_()&&n.Ta.length>0}function Gc(n){ce(n).start()}async function hm(n){ce(n).ra()}async function fm(n){const t=ce(n);for(const e of n.Ta)t.ea(e.mutations)}async function dm(n,t,e){const r=n.Ta.shift(),s=Vs.from(r,t,e);await qc(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Kr(n)}async function pm(n,t){t&&ce(n).X_&&await(async function(r,s){if((function(a){return c_(a)&&a!==P.ABORTED})(s.code)){const o=r.Ta.shift();ce(r).B_(),await qc(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Kr(r)}})(n,t),zc(n)&&Gc(n)}async function Za(n,t){const e=Q(n);e.asyncQueue.verifyOperationInProgress(),x(qn,"RemoteStore received new credentials");const r=Gn(e);e.Ea.add(3),await zn(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Wr(e)}async function _m(n,t){const e=Q(n);t?(e.Ea.delete(2),await Wr(e)):t||(e.Ea.add(2),await zn(e),e.Ra.set("Unknown"))}function ce(n){return n.fa||(n.fa=(function(e,r,s){const o=Q(e);return o.sa(),new im(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:hm.bind(null,n),r_:pm.bind(null,n),ta:fm.bind(null,n),na:dm.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await Kr(n)):(await n.fa.stop(),n.Ta.length>0&&(x(qn,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class xs{constructor(t,e,r,s,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Te,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,s,o){const a=Date.now()+r,u=new xs(t,e,a,s,o);return u.start(r),u}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(P.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wc(n,t){if(be("AsyncQueue",`${t}: ${n}`),jn(n))return new L(P.UNAVAILABLE,`${t}: ${n}`);throw n}class mm{constructor(){this.queries=tl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const s=Q(e),o=s.queries;s.queries=tl(),o.forEach(((a,u)=>{for(const f of u.Sa)f.onError(r)}))})(this,new L(P.ABORTED,"Firestore shutting down"))}}function tl(){return new Pe((n=>bc(n)),Ac)}function gm(n){n.Ca.forEach((t=>{t.next()}))}var el,nl;(nl=el||(el={})).Ma="default",nl.Cache="cache";const ym="SyncEngine";class vm{constructor(t,e,r,s,o,a){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Pe((u=>bc(u)),Ac),this.Iu=new Map,this.Eu=new Set,this.du=new St($.comparator),this.Au=new Map,this.Ru=new ks,this.Vu={},this.mu=new Map,this.fu=Ke.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Em(n,t,e){const r=Am(n);try{const s=await(function(a,u){const f=Q(a),h=tt.now(),E=u.reduce(((S,k)=>S.add(k.key)),Et());let p,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let k=xr(),O=Et();return f.Ns.getEntries(S,E).next((D=>{k=D,k.forEach(((M,N)=>{N.isValidDocument()||(O=O.add(M))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,k))).next((D=>{p=D;const M=[];for(const N of u){const F=s_(N,p.get(N.key).overlayedDocument);F!=null&&M.push(new Ve(N.key,F,gc(F.value.mapValue),Gt.exists(!0)))}return f.mutationQueue.addMutationBatch(S,h,M,u)})).next((D=>{I=D;const M=D.applyToLocalDocumentSet(p,O);return f.documentOverlayCache.saveOverlays(S,D.batchId,M)}))})).then((()=>({batchId:I.batchId,changes:Sc(p)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,u,f){let h=a.Vu[a.currentUser.toKey()];h||(h=new St(G)),h=h.insert(u,f),a.Vu[a.currentUser.toKey()]=h})(r,s.batchId,e),await Qr(r,s.changes),await Kr(r.remoteStore)}catch(s){const o=Wc(s,"Failed to persist write");e.reject(o)}}function rl(n,t,e){const r=Q(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const s=[];r.Tu.forEach(((o,a)=>{const u=a.view.va(t);u.snapshot&&s.push(u.snapshot)})),(function(a,u){const f=Q(a);f.onlineState=u;let h=!1;f.queries.forEach(((E,p)=>{for(const I of p.Sa)I.va(u)&&(h=!0)})),h&&gm(f)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Tm(n,t){const e=Q(n),r=t.batch.batchId;try{const s=await K_(e.localStore,t);Qc(e,r,null),Kc(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Qr(e,s)}catch(s){await vs(s)}}async function wm(n,t,e){const r=Q(n);try{const s=await(function(a,u){const f=Q(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let E;return f.mutationQueue.lookupMutationBatch(h,u).next((p=>(st(p!==null,37113),E=p.keys(),f.mutationQueue.removeMutationBatch(h,p)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,E,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,E))).next((()=>f.localDocuments.getDocuments(h,E)))}))})(r.localStore,t);Qc(r,t,e),Kc(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Qr(r,s)}catch(s){await vs(s)}}function Kc(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function Qc(n,t,e){const r=Q(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(t);o&&(e?o.reject(e):o.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}async function Qr(n,t,e){const r=Q(n),s=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,f)=>{a.push(r.pu(f,t,e).then((h=>{if((h||e)&&r.isPrimaryClient){const E=h?!h.fromCache:e?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(h){s.push(h);const E=Ns.As(f.targetId,h);o.push(E)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(f,h){const E=Q(f);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>C.forEach(h,(I=>C.forEach(I.Es,(S=>E.persistence.referenceDelegate.addReference(p,I.targetId,S))).next((()=>C.forEach(I.ds,(S=>E.persistence.referenceDelegate.removeReference(p,I.targetId,S)))))))))}catch(p){if(!jn(p))throw p;x(z_,"Failed to update sequence numbers: "+p)}for(const p of h){const I=p.targetId;if(!p.fromCache){const S=E.Ms.get(I),k=S.snapshotVersion,O=S.withLastLimboFreeSnapshotVersion(k);E.Ms=E.Ms.insert(I,O)}}})(r.localStore,o))}async function Im(n,t){const e=Q(n);if(!e.currentUser.isEqual(t)){x(ym,"User change. New user:",t.toKey());const r=await Bc(e.localStore,t);e.currentUser=t,(function(o,a){o.mu.forEach((u=>{u.forEach((f=>{f.reject(new L(P.CANCELLED,a))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Qr(e,r.Ls)}}function Am(n){const t=Q(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wm.bind(null,t),t}class Fr{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Gr(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return W_(this.persistence,new q_,t.initialUser,this.serializer)}Cu(t){return new $c(Ds.mi,this.serializer)}Du(t){return new J_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fr.provider={build:()=>new Fr};class bm extends Fr{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){st(this.persistence.referenceDelegate instanceof Lr,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new P_(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new $c((r=>Lr.mi(r,e)),this.serializer)}}class rs{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rl(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Im.bind(null,this.syncEngine),await _m(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new mm})()}createDatastore(t){const e=Gr(t.databaseInfo.databaseId),r=(function(o){return new nm(o)})(t.databaseInfo);return(function(o,a,u,f){return new om(o,a,u,f)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,s,o,a,u){return new lm(r,s,o,a,u)})(this.localStore,this.datastore,t.asyncQueue,(e=>rl(this.syncEngine,e,0)),(function(){return Ja.v()?new Ja:new Y_})())}createSyncEngine(t,e){return(function(s,o,a,u,f,h,E){const p=new vm(s,o,a,u,f,h);return E&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=Q(e);x(qn,"RemoteStore shutting down."),r.Ea.add(5),await zn(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}rs.provider={build:()=>new rs};const ue="FirestoreClient";class Rm{constructor(t,e,r,s,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=s,this.user=vt.UNAUTHENTICATED,this.clientId=gs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async a=>{x(ue,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(x(ue,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Te;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Wc(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function ki(n,t){n.asyncQueue.verifyOperationInProgress(),x(ue,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Bc(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function il(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Sm(n);x(ue,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((r=>Za(t.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Za(t.remoteStore,s))),n._onlineComponents=t}async function Sm(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x(ue,"Using user provided OfflineComponentProvider");try{await ki(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===P.FAILED_PRECONDITION||s.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;jr("Error using user provided cache. Falling back to memory cache: "+e),await ki(n,new Fr)}}else x(ue,"Using default OfflineComponentProvider"),await ki(n,new bm(void 0));return n._offlineComponents}async function Cm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(x(ue,"Using user provided OnlineComponentProvider"),await il(n,n._uninitializedComponentsProvider._online)):(x(ue,"Using default OnlineComponentProvider"),await il(n,new rs))),n._onlineComponents}function Pm(n){return Cm(n).then((t=>t.syncEngine))}function Xc(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const sl=new Map;const Jc="firestore.googleapis.com",ol=!0;class al{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new L(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jc,this.ssl=ol}else this.host=t.host,this.ssl=t.ssl??ol;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Uc;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<S_)throw new L(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xc(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Xr{constructor(t,e,r,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new al({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new L(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new al(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new op;switch(r.type){case"firstParty":return new up(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=sl.get(e);r&&(x("ComponentProvider","Removing Datastore"),sl.delete(e),r.terminate())})(this),Promise.resolve()}}function Vm(n,t,e,r={}){n=lc(n,Xr);const s=ds(t),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},u=`${t}:${e}`;s&&(Nf(`https://${u}`),Lf("Firestore",!0)),o.host!==Jc&&o.host!==u&&jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:s,emulatorOptions:r};if(!br(f,a)&&(n._setSettings(f),r.mockUserToken)){let h,E;if(typeof r.mockUserToken=="string")h=r.mockUserToken,E=vt.MOCK_USER;else{h=xf(r.mockUserToken,n._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new L(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new vt(p)}n._authCredentials=new ap(new sc(h,E))}}class Os{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Os(this.firestore,t,this._query)}}class Tt{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new se(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Tt(this.firestore,t,this._key)}toJSON(){return{type:Tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Bn(e,Tt._jsonSchema))return new Tt(t,r||null,new $(rt.fromString(e.referencePath)))}}Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:at("string",Tt._jsonSchemaVersion),referencePath:at("string")};class se extends Os{constructor(t,e,r){super(t,e,Hp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Tt(this.firestore,null,new $(t))}withConverter(t){return new se(this.firestore,t,this._path)}}function km(n,t,...e){if(n=Vn(n),oc("collection","path",t),n instanceof Xr){const r=rt.fromString(t,...e);return Pa(r),new se(n,null,r)}{if(!(n instanceof Tt||n instanceof se))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rt.fromString(t,...e));return Pa(r),new se(n.firestore,null,r)}}function Dm(n,t,...e){if(n=Vn(n),arguments.length===1&&(t=gs.newId()),oc("doc","path",t),n instanceof Xr){const r=rt.fromString(t,...e);return Ca(r),new Tt(n,null,new $(r))}{if(!(n instanceof Tt||n instanceof se))throw new L(P.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rt.fromString(t,...e));return Ca(r),new Tt(n.firestore,n instanceof se?n.converter:null,new $(r))}}const ll="AsyncQueue";class cl{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jc(this,"async_queue_retry"),this._c=()=>{const r=Vi();r&&x(ll,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=Vi();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Vi();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Te;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!jn(t))throw t;x(ll,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,be("INTERNAL UNHANDLED ERROR: ",ul(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=xs.createAndSchedule(this,t,e,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&j(47125,{Pc:ul(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function ul(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Yc extends Xr{constructor(t,e,r,s){super(t,e,r,s),this.type="firestore",this._queue=new cl,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cl(t),this._firestoreClient=void 0,await t}}}function Nm(n,t){const e=typeof n=="object"?n:Wd(),r=typeof n=="string"?n:Vr,s=jd(e,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=kf("firestore");o&&Vm(s,...o)}return s}function xm(n){if(n._terminated)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Om(n),n._firestoreClient}function Om(n){const t=n._freezeSettings(),e=(function(s,o,a,u){return new Cp(s,o,a,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Xc(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new Rm(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class Nt{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Nt(Ht.fromBase64String(t))}catch(e){throw new L(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Nt(Ht.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Nt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Bn(t,Nt._jsonSchema))return Nt.fromBase64String(t.bytes)}}Nt._jsonSchemaVersion="firestore/bytes/1.0",Nt._jsonSchema={type:at("string",Nt._jsonSchemaVersion),bytes:at("string")};class Ms{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new L(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Zc{constructor(t){this._methodName=t}}class Wt{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new L(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new L(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return G(this._lat,t._lat)||G(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wt._jsonSchemaVersion}}static fromJSON(t){if(Bn(t,Wt._jsonSchema))return new Wt(t.latitude,t.longitude)}}Wt._jsonSchemaVersion="firestore/geoPoint/1.0",Wt._jsonSchema={type:at("string",Wt._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};class Kt{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Kt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Bn(t,Kt._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Kt(t.vectorValues);throw new L(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kt._jsonSchemaVersion="firestore/vectorValue/1.0",Kt._jsonSchema={type:at("string",Kt._jsonSchemaVersion),vectorValues:at("object")};const Mm=/^__.*__$/;class Lm{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Ve(t,this.data,this.fieldMask,e,this.fieldTransforms):new Hn(t,this.data,e,this.fieldTransforms)}}function tu(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{Ac:n})}}class Ls{constructor(t,e,r,s,o,a){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ls({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ur(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(tu(this.Ac)&&Mm.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Fm{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Gr(t)}Cc(t,e,r,s=!1){return new Ls({Ac:t,methodName:e,Dc:r,path:pt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Um(n){const t=n._freezeSettings(),e=Gr(n._databaseId);return new Fm(n._databaseId,!!t.ignoreUndefinedProperties,e)}function $m(n,t,e,r,s,o={}){const a=n.Cc(o.merge||o.mergeFields?2:0,t,e,s);iu("Data must be an object, but it was:",a,r);const u=nu(r,a);let f,h;if(o.merge)f=new Ot(a.fieldMask),h=a.fieldTransforms;else if(o.mergeFields){const E=[];for(const p of o.mergeFields){const I=Bm(t,p,e);if(!a.contains(I))throw new L(P.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Hm(E,I)||E.push(I)}f=new Ot(E),h=a.fieldTransforms.filter((p=>f.covers(p.field)))}else f=null,h=a.fieldTransforms;return new Lm(new Dt(u),f,h)}function eu(n,t){if(ru(n=Vn(n)))return iu("Unsupported field value:",t,n),nu(n,t);if(n instanceof Zc)return(function(r,s){if(!tu(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let a=0;for(const u of r){let f=eu(u,s.wc(a));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),a++}return{arrayValue:{values:o}}})(n,t)}return(function(r,s){if((r=Vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zp(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=tt.fromDate(r);return{timestampValue:Zi(s.serializer,o)}}if(r instanceof tt){const o=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zi(s.serializer,o)}}if(r instanceof Wt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nt)return{bytesValue:f_(s.serializer,r._byteString)};if(r instanceof Tt){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Lc(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Kt)return(function(a,u){return{mapValue:{fields:{[_c]:{stringValue:mc},[Ki]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return Ps(u.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${ys(r)}`)})(n,t)}function nu(n,t){const e={};return uc(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ze(n,((r,s)=>{const o=eu(s,t.mc(r));o!=null&&(e[r]=o)})),{mapValue:{fields:e}}}function ru(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof tt||n instanceof Wt||n instanceof Nt||n instanceof Tt||n instanceof Zc||n instanceof Kt)}function iu(n,t,e){if(!ru(e)||!ac(e)){const r=ys(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function Bm(n,t,e){if((t=Vn(t))instanceof Ms)return t._internalPath;if(typeof t=="string")return su(n,t);throw Ur("Field path arguments must be of type string or ",n,!1,void 0,e)}const jm=new RegExp("[~\\*/\\[\\]]");function su(n,t,e){if(t.search(jm)>=0)throw Ur(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Ms(...t.split("."))._internalPath}catch{throw Ur(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Ur(n,t,e,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(o||a)&&(f+=" (found",o&&(f+=` in field ${r}`),a&&(f+=` in document ${s}`),f+=")"),new L(P.INVALID_ARGUMENT,u+n+f)}function Hm(n,t){return n.some((e=>e.isEqual(t)))}class ou{constructor(t,e,r,s,o){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(au("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class qm extends ou{data(){return super.data()}}function au(n,t){return typeof t=="string"?su(n,t):t instanceof Ms?t._internalPath:t._delegate._internalPath}function zm(n,t,e){let r;return r=n?n.toFirestore(t):t,r}class mr{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $e extends ou{constructor(t,e,r,s,o,a){super(t,e,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new wr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(au("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=$e._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}$e._jsonSchemaVersion="firestore/documentSnapshot/1.0",$e._jsonSchema={type:at("string",$e._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class wr extends $e{data(t={}){return super.data(t)}}class Cn{constructor(t,e,r,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new mr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new wr(this._firestore,this._userDataWriter,r.key,r,new mr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((u=>{const f=new wr(s._firestore,s._userDataWriter,u.doc.key,u.doc,new mr(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new wr(s._firestore,s._userDataWriter,u.doc.key,u.doc,new mr(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,E=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),E=a.indexOf(u.doc.key)),{type:Gm(u.type),doc:f,oldIndex:h,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Cn._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=gs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Gm(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:n})}}Cn._jsonSchemaVersion="firestore/querySnapshot/1.0",Cn._jsonSchema={type:at("string",Cn._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};function Wm(n,t){const e=lc(n.firestore,Yc),r=Dm(n),s=zm(n.converter,t);return Km(e,[$m(Um(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then((()=>r))}function Km(n,t){return(function(r,s){const o=new Te;return r.asyncQueue.enqueueAndForget((async()=>Em(await Pm(r),s,o))),o.promise})(xm(n),t)}(function(t,e=!0){(function(s){Ye=s})(Gd),Sr(new kn("firestore",((r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),u=new Yc(new lp(r.getProvider("auth-internal")),new hp(a,r.getProvider("app-check-internal")),(function(h,E){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new L(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kr(h.options.projectId,E)})(a,s),a);return o={useFetchStreams:e,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Fe(Aa,ba,t),Fe(Aa,ba,"esm2020")})();const Qm={apiKey:"AIzaSyDedeRrASAxCv5Z8FmcbKluEY0sEyo38-0",authDomain:"wedding-site-f387b.firebaseapp.com",projectId:"wedding-site-f387b",storageBucket:"wedding-site-f387b.firebasestorage.app",messagingSenderId:"633435858250",appId:"1:633435858250:web:ab098c21d141c2a17a8db3",measurementId:"G-40LDJ8JGPK"},Xm=Xl(Qm),Jm=Nm(Xm);function Ym(){const[n,t]=xt(window.innerWidth);function e(){t(window.innerWidth)}return Ie(()=>(window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}),[]),n}const hl={name:"",food:"Kött",food_pref:"",plus_one:"No",second_person_name:"",second_person_food:"Kött",food_pref_2:"",carpool:"",sleepover:"",arriveFriday:"",songWishlist:""};function Zm(){const[n,t]=xt(hl),[e,r]=xt({name:"",second_person_name:"",food:"",second_person_food:""}),[s,o]=xt({name:!1,second_person_name:!1}),a=km(Jm,"invites"),u=async()=>{try{await Wm(a,n)}catch(N){console.error(N)}},f=/^\D{2,}$/,h=N=>{const{name:F,value:z}=N.target;let et="";(F==="name"||F==="second_person_name")&&!f.test(z)?et="That's not a valid name!":z.length<1&&(et="You can't leave this field empty!"),r(W=>({...W,[F]:et})),t(W=>({...W,[F]:z}))},E=N=>{const F=e[N];if(s[N])return F?_("span",{class:J.errorIcon,children:"✖"}):_("span",{class:J.validIcon,children:"✓"})},p=N=>{N.preventDefault(),u(),N.currentTarget.reset(),I()},I=()=>{t(hl)},S=N=>{N.target.value&&o(F=>({...F,[N.target.name]:!0}))},[k,O]=xt(!0);typeof window<"u"&&O(Ym()>=1e3);const D=()=>_("div",{class:`${J.section} ${J.right} ${n.plus_one=="Yes"?J.active:""}`,children:n.plus_one=="Yes"&&_("div",{class:J.input_group,children:[_("div",{class:J.name_container,children:[_("label",{for:"second_person_name",children:"Andra personens namn*"}),_("input",{type:"text",id:"second_person_name",name:"second_person_name",required:!0,value:n.second_person_name,onInput:h,onBlur:S}),E("second_person_name")]}),_("fieldset",{class:J.radio,children:[_("legend",{children:"Protein för person 2"}),_("label",{children:[_("input",{type:"radio",id:"meat",name:"second_person_food",value:"Kött",required:!0,checked:n.second_person_food==="Kött",onChange:h}),"Kött"]}),_("label",{children:[_("input",{type:"radio",id:"fish",name:"second_person_food",value:"Fisk",required:!0,checked:n.second_person_food==="Fisk",onChange:h}),"Fisk"]}),_("label",{children:[_("input",{type:"radio",id:"veg",name:"second_person_food",value:"Veg",required:!0,checked:n.second_person_food==="Veg",onChange:h}),"Veg"]})]}),_("label",{for:"food_pref_2"}),_("input",{type:"text",id:"food_pref_2",placeholder:"Här kan du skriva om du har några särskilda matpreferenser, allergier osv.",class:J.food_pref})]})}),M=Object.values(e).every(N=>!N)&&n.name!==""&&(n.plus_one!=="Yes"||n.second_person_name!=="");return _("form",{class:J.rsvp_form,onSubmit:p,children:[_("div",{class:`${J.section_wrapper} ${n.plus_one=="Yes"?J.active:""}`,children:[_("div",{class:`${J.section} ${J.left}`,children:[_("div",{class:J.input_group,children:[_("div",{class:J.name_container,children:[_("label",{for:"name",children:"Namn*"}),_("input",{type:"text",id:"name",name:"name",required:!0,value:n.name,onInput:h,onBlur:S}),E("name")]}),_("fieldset",{class:J.radio,children:[_("legend",{children:"Alternativ för middag"}),_("label",{for:"meat",children:[_("input",{type:"radio",id:"meat",name:"food",value:"Kött",required:!0,checked:n.food==="Kött",onChange:h}),"Kött"]}),_("label",{for:"fish",children:[_("input",{type:"radio",id:"fish",name:"food",value:"Fisk",required:!0,checked:n.food==="Fisk",onChange:h}),"Fisk"]}),_("label",{for:"veg",children:[_("input",{type:"radio",id:"veg",name:"food",value:"Veg",required:!0,checked:n.food==="Veg",onChange:h}),"Veg"]})]}),_("label",{for:"food_pref"}),_("input",{type:"text",id:"food_pref",placeholder:"Här kan du skriva om du har några särskilda matpreferenser, allergier osv.",class:J.food_pref}),_("fieldset",{class:J.radio,children:[_("legend",{children:"Tar du med en +1?"}),_("label",{children:[_("input",{type:"radio",name:"plus_one",value:"Yes",checked:n.plus_one==="Yes",onChange:h}),"Ja"]}),_("label",{children:[_("input",{type:"radio",name:"plus_one",value:"No",checked:n.plus_one==="No",onChange:h}),"Nej"]})]})]}),k?"":_(D,{}),_("div",{class:J.input_group,children:[_("fieldset",{class:J.radio,children:[_("legend",{children:"Vill du/ni samåka med buss från Malmö till Hotell Mossbylund?"}),_("label",{children:[_("input",{type:"radio",name:"carpool",value:"Yes",checked:n.carpool==="Yes",onChange:h}),"Ja"]}),_("label",{children:[_("input",{type:"radio",name:"carpool",value:"No",checked:n.carpool==="No",onChange:h}),"Nej"]})]}),_("fieldset",{class:J.radio,children:[_("legend",{children:"Vill du/ni sova över på Hotell Mossbylund?"}),_("label",{children:[_("input",{type:"radio",name:"sleepover",value:"Yes",checked:n.sleepover==="Yes",onChange:h}),"Ja"]}),_("label",{children:[_("input",{type:"radio",name:"sleepover",value:"No",checked:n.sleepover==="No",onChange:h}),"Nej"]})]}),_("fieldset",{class:J.radio,children:[_("legend",{children:"Vill du/ni checka in redan på fredag?"}),_("label",{children:[_("input",{type:"radio",name:"arriveFriday",value:"yes",checked:n.arriveFriday==="Yes",onChange:h}),"Ja"]}),_("label",{children:[_("input",{type:"radio",name:"arriveFriday",value:"No",checked:n.arriveFriday==="No",onChange:h}),"Nej"]})]}),_("div",{class:J.textarea__wrapper,children:[_("label",{for:"songWishlist",children:"Finns det några låtar du önskar ska spelas under discodansen?"}),_("textarea",{name:"songWishlist",id:"songWishlist",value:n.songWishlist,onInput:h,rows:10})]})]})]}),k?_(D,{}):""]}),_("button",{class:J.rsvp_button,disabled:!M,children:"Skicka in!"})]})}function tg(){return _("div",{children:_(zt,{title:"O.S.A.",children:[_("p",{children:"Här kan du berätta för oss om du kommer och om du tar med dig en kompanjon."}),_(Zm,{})]})})}const eg="_grid_1908r_1",ng="_toastmadame_img_1908r_21",Di={grid:eg,toastmadame_img:ng},rg="/wedding-site/assets/emma_kroon-BXvT-_pV.jpg",ig="/wedding-site/assets/maja_carlsson-CPvJsMJl.JPEG";function sg(){return _("div",{children:_(zt,{title:"Kontakt",children:[_("p",{children:"Här kan du hitta kontaktuppgifter till diverse personer som kan vara av intresse."}),_("div",{children:[_("h3",{children:"Helle"}),_("p",{children:"Koordinator på Hotell Mossbylund"}),_("p",{children:"Ifall du har några frågor om bröllopslokalen osv."}),_("p",{children:"Mail: helle@mossbylund.se"}),_("p",{children:"Telefon: +46XXXXXXXX"})]}),_("div",{children:[_("h3",{children:"Toastmadadmememes"}),_("div",{class:Di.grid,children:[_("div",{children:[_("img",{src:rg,alt:"Emma Kroon",class:Di.toastmadame_img}),_("p",{children:"Emma Kroon"}),_("p",{children:"Mail: emma@mossbylund.se"}),_("p",{children:"Telefon: +46XXXXXXXX"})]}),_("div",{children:[_("img",{src:ig,alt:"Maja Carlsson",class:Di.toastmadame_img}),_("p",{children:"Maja Carlsson"}),_("p",{children:"Mail: maja@mossbylund.se"}),_("p",{children:"Telefon: +46XXXXXXXX"})]})]})]}),_("div",{children:[_("h3",{children:"Hotell Mossbylund"}),_("p",{children:"Bröllopsplats"}),_("p",{children:"Ifall du vill boka rum eller något."}),_("p",{children:"Mail: helle@mossbylund.se"}),_("p",{children:"Telefon: +46XXXXXXXX"})]}),_("div",{children:[_("h3",{children:"Brudparet"}),_("p",{children:"De lyckligt lottade"}),_("p",{children:"Kontakta inte oss är du snäll."}),_("p",{children:"Mail: paulau@gmail.com"}),_("p",{children:"Telefon: +46XXXXXXXX"})]})]})})}function og(){return _("section",{children:[_("h1",{children:"404: Not Found"}),_("p",{children:"It's gone :("})]})}function ag(){return _($n,{children:[_(dh,{}),_(Vl,{children:[_(xe,{path:"/",component:bh}),_(xe,{path:"/innan-brollopsdagen",component:rf}),_(xe,{path:"/brollopsdagen",component:uf}),_(xe,{path:"/osa",component:tg}),_(xe,{path:"/kontakt",component:sg}),_(xe,{default:!0,component:og})]})]})}typeof window<"u"&&nh(_(ag,{}),document.getElementById("app"));export{Nh as $,Pt as A,Ch as D,bl as F,cs as Q,lg as R,xt as d,Rl as q,_ as u,$r as x,Ie as y};
